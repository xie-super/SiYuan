{"ID":"20231227140100-ftisky0","Spec":"1","Type":"NodeDocument","Properties":{"id":"20231227140100-ftisky0","title":"Proxy （代理模式）","updated":"20231227203726"},"Children":[{"ID":"20231227140100-c2zeph7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231227140100-c2zeph7","updated":"20231227202346"},"Children":[{"Type":"NodeText","Data":"案例:糖果机（状态模式）"}]},{"ID":"20231227202347-95baz9j","Type":"NodeParagraph","Properties":{"id":"20231227202347-95baz9j","updated":"20231227202348"},"Children":[{"Type":"NodeText","Data":"糖果公司有了新的需求，CEO希望他们的糖果机能够得到监控，CEO想要随时掌握糖果机的状态。"}]},{"ID":"20231227202413-o3mbyse","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231227202413-o3mbyse","updated":"20231227202536"},"Children":[{"Type":"NodeText","Data":"最初设计："}]},{"ID":"20231227202538-y21d4y6","Type":"NodeParagraph","Properties":{"id":"20231227202538-y21d4y6","updated":"20231227202538"},"Children":[{"Type":"NodeText","Data":"加入一个 location字段"}]},{"ID":"20231227202539-zi1lywm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231227202539-zi1lywm","updated":"20231227203242"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class GumballMachine{//也就是 Context\n\t...\n\tprivate String location;\n\tpublic String getLocation(){\n\t\treturn this.location;\n\t}\n}\n \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231227203009-9ypybxe","Type":"NodeParagraph","Properties":{"id":"20231227203009-9ypybxe","updated":"20231227203011"},"Children":[{"Type":"NodeText","Data":"为了能够更好的监视糖果机，并获取糖果机的某些信息，所以我们需要创建一个GumballMonitor(糖果机监视器)，GumballMonitor用于输出糖果机的位置location，含有糖果的数量count，糖果机目前的状态state这三种信息。"}]},{"ID":"20231227203014-i2568h2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231227203014-i2568h2","updated":"20231227203020"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"//糖果机监视器\npublic class GumballMonitor {\n\tGumballMachine machine;\n \n\tpublic GumballMonitor(GumballMachine machine) {\n\t\tthis.machine = machine;\n\t}\n \n\t//打印糖果机信息\n\tpublic void report() {\n\t\tSystem.out.println(\"Gumball Machine: \" + machine.getLocation());\n\t\tSystem.out.println(\"Current inventory: \" + machine.getCount() + \" gumballs\");\n\t\tSystem.out.println(\"Current state: \" + machine.getState());\n\t}\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231227203211-nd80vxx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231227203211-nd80vxx","updated":"20231227203230"},"Children":[{"Type":"NodeText","Data":"问题"}]},{"ID":"20231227203231-rr7irim","Type":"NodeParagraph","Properties":{"id":"20231227203231-rr7irim","updated":"20231227203726"},"Children":[{"Type":"NodeText","Data":"这样"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GumballMonitor"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GumballMachine"},{"Type":"NodeText","Data":"​是跑在一个机器上的，但是 CEO 想要从自己的电脑上监控到世界各地的糖果机，也就是说需要"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GumballMachine"},{"Type":"NodeText","Data":"​在远程电脑上也可以检测到。"}]},{"ID":"20231227141826-6d6dv9v","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231227141826-6d6dv9v","updated":"20231227203640"},"Children":[{"Type":"NodeText","Data":"解决 远程代理"}]},{"ID":"20231227141933-2vp279o","Type":"NodeParagraph","Properties":{"id":"20231227141933-2vp279o","updated":"20231227203703"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231227141933-1rosnxx.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20231227141936-7xck0de","Type":"NodeParagraph","Properties":{"id":"20231227141936-7xck0de","updated":"20231227142028"},"Children":[{"Type":"NodeText","Data":"Gumball Monitor调用 Proxy，但是 Proxy没有我们要获取的数据，可以用 Proxy与 Gumball Machine 通信"}]},{"ID":"20231227143019-kd26nn6","Type":"NodeParagraph","Properties":{"id":"20231227143019-kd26nn6","updated":"20231227143019"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231227143019-0rhkap9.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231227143050-f6jhend","Type":"NodeParagraph","Properties":{"id":"20231227143050-f6jhend"}},{"ID":"20231227143051-i2anw5j","Type":"NodeParagraph","Properties":{"id":"20231227143051-i2anw5j","updated":"20231227143051"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231227143051-chs4kva.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231227143844-tdb3d2j","Type":"NodeParagraph","Properties":{"id":"20231227143844-tdb3d2j","updated":"20231227143844"}},{"ID":"20231227144003-amzw41h","Type":"NodeParagraph","Properties":{"id":"20231227144003-amzw41h","updated":"20231227144003"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231227144003-uwfb3q9.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231227143845-75mra0q","Type":"NodeParagraph","Properties":{"id":"20231227143845-75mra0q","updated":"20231227143845"}}]}