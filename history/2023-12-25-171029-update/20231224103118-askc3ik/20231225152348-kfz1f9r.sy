{"ID":"20231225152348-kfz1f9r","Spec":"1","Type":"NodeDocument","Properties":{"id":"20231225152348-kfz1f9r","title":"Decorator Pattern（装饰者模式）","updated":"20231225170435"},"Children":[{"ID":"20231225163357-7pqlvxw","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231225163357-7pqlvxw","updated":"20231225163359"},"Children":[{"Type":"NodeText","Data":"定义"}]},{"ID":"20231225152348-yne7flg","Type":"NodeParagraph","Properties":{"id":"20231225152348-yne7flg","updated":"20231225152349"},"Children":[{"Type":"NodeText","Data":"装饰者模式（Decorator Pattern）是一种结构型设计模式，它允许你通过将对象放入包含行为的特殊封装类中来给对象动态地添加职责，而无需改变其代码。"}]},{"ID":"20231225152408-vagd92g","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231225152408-vagd92g","updated":"20231225163409"},"Children":[{"Type":"NodeText","Data":"范例：咖啡店"}]},{"ID":"20231225163728-9r38oi5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231225163728-9r38oi5","updated":"20231225163734"},"Children":[{"Type":"NodeText","Data":"原先设计"}]},{"ID":"20231225162044-zluhqbb","Type":"NodeParagraph","Properties":{"id":"20231225162044-zluhqbb","updated":"20231225163745"},"Children":[{"Type":"NodeText","Data":"描述：咖啡饮品需要添加不同的调味品："}]},{"ID":"20231225163740-2hat2tw","Type":"NodeParagraph","Properties":{"id":"20231225163740-2hat2tw","updated":"20231225163740"}},{"ID":"20231225162047-kxsyyp2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231225162047-kxsyyp2","updated":"20231225163756"},"Children":[{"Type":"NodeText","Data":"问题："}]},{"ID":"20231225163757-qi4s5mh","Type":"NodeParagraph","Properties":{"id":"20231225163757-qi4s5mh","updated":"20231225163801"},"Children":[{"Type":"NodeText","Data":"类爆炸问题"}]},{"ID":"20231225163720-i8rmpbj","Type":"NodeParagraph","Properties":{"id":"20231225163720-i8rmpbj","updated":"20231225163720"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225163720-9cq1ut9.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225163812-ifh62ir","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231225163812-ifh62ir","updated":"20231225163816"},"Children":[{"Type":"NodeText","Data":"改进"}]},{"ID":"20231225163821-gtpwgs5","Type":"NodeList","ListData":{},"Properties":{"id":"20231225163821-gtpwgs5","updated":"20231225163841"},"Children":[{"ID":"20231225163823-da5vp63","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225163823-da5vp63","updated":"20231225163823"},"Children":[{"ID":"20231225163823-nps7bl1","Type":"NodeParagraph","Properties":{"id":"20231225163823-nps7bl1","updated":"20231225163834"},"Children":[{"Type":"NodeText","Data":" 实例变量"}]}]},{"ID":"20231225163837-t3bmg2d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225163837-t3bmg2d","updated":"20231225163841"},"Children":[{"ID":"20231225163837-f57udd5","Type":"NodeParagraph","Properties":{"id":"20231225163837-f57udd5","updated":"20231225163841"},"Children":[{"Type":"NodeText","Data":"继承"}]}]}]},{"ID":"20231225162120-8gdcbbp","Type":"NodeParagraph","Properties":{"id":"20231225162120-8gdcbbp","updated":"20231225163846"},"Children":[{"Type":"NodeText","Data":"描述：将调味品价格作为变量存在 Beverage类中，饮品种类继承 Beverage类"}]},{"ID":"20231225162126-nw50fph","Type":"NodeParagraph","Properties":{"id":"20231225162126-nw50fph","updated":"20231225163854"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225162126-xogg5sc.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225162129-rrjalh1","Type":"NodeParagraph","Properties":{"id":"20231225162129-rrjalh1","updated":"20231225162129"}},{"ID":"20231225162218-mr4ycuj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231225162218-mr4ycuj","updated":"20231225163858"},"Children":[{"Type":"NodeText","Data":"代码设计"}]},{"ID":"20231225162218-0bd3hgb","Type":"NodeParagraph","Properties":{"id":"20231225162218-0bd3hgb","updated":"20231225162218"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225162218-cnd8csv.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225162810-k3szspz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231225162810-k3szspz","updated":"20231225163902"},"Children":[{"Type":"NodeText","Data":"存在的问题（不符合开闭原则）"}]},{"ID":"20231225162456-1m5fvxg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231225162456-1m5fvxg","updated":"20231225162738"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dGV4dA=="},{"Type":"NodeCodeBlockCode","Data":"1. 调味品价格的变化将迫使我们修改现有的代码。\n2. 新的调味品将迫使我们添加新的方法并修改超类中的成本方法。\n3. 我们可能会有新的饮料。对于其中一些饮料（冰茶？），调味料可能不合适，然而 Tea 子类仍将继承像 hasWhip() 这样的方法。\n如果客户想要一份双摩卡呢？\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231225162828-ivpld3y","Type":"NodeParagraph","Properties":{"id":"20231225162828-ivpld3y"}},{"ID":"20231225164000-9np8lq3","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231225164000-9np8lq3","updated":"20231225164027"},"Children":[{"Type":"NodeText","Data":"优化方案：装饰者模式"}]},{"ID":"20231225164746-hs5fd5c","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231225164746-hs5fd5c","updated":"20231225164749"},"Children":[{"Type":"NodeText","Data":"案例"}]},{"ID":"20231225164801-979cdzw","Type":"NodeParagraph","Properties":{"id":"20231225164801-979cdzw","updated":"20231225164822"},"Children":[{"Type":"NodeText","Data":"以咖啡饮料为主体，然后在运行时以调料来装饰（decorate）咖啡饮料。比如，如果顾客想要摩卡和奶泡深培咖啡，那么，做法是："}]},{"ID":"20231225164801-lk7xh93","Type":"NodeList","ListData":{},"Properties":{"id":"20231225164801-lk7xh93","updated":"20231225164857"},"Children":[{"ID":"20231225164826-ot6mkpp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"fold":"0","id":"20231225164826-ot6mkpp","updated":"20231225164826"},"Children":[{"ID":"20231225164828-cgjixk1","Type":"NodeParagraph","Properties":{"id":"20231225164828-cgjixk1","updated":"20231225164828"},"Children":[{"Type":"NodeText","Data":"获取一个深培咖啡（DarkRoast）对象"}]},{"ID":"20231225164836-tsppia7","Type":"NodeList","ListData":{},"Properties":{"id":"20231225164836-tsppia7"},"Children":[{"ID":"20231225164835-scr1kan","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225164835-scr1kan"},"Children":[{"ID":"20231225164835-qknhfi6","Type":"NodeParagraph","Properties":{"id":"20231225164835-qknhfi6"},"Children":[{"Type":"NodeText","Data":"以摩卡（Mocha）调料对象来装饰它\n"}]}]},{"ID":"20231225164839-e9zn2an","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225164839-e9zn2an"},"Children":[{"ID":"20231225164839-o2gtp6y","Type":"NodeParagraph","Properties":{"id":"20231225164839-o2gtp6y"},"Children":[{"Type":"NodeText","Data":"以奶泡（Whip）调料对象来装饰它\n"}]}]},{"ID":"20231225164843-jpw03uo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225164843-jpw03uo"},"Children":[{"ID":"20231225164843-rthkocp","Type":"NodeParagraph","Properties":{"id":"20231225164843-rthkocp"},"Children":[{"Type":"NodeText","Data":"调用cost（）方法，并依赖委托（delegate）将调料的价格加上去"}]}]}]}]},{"ID":"20231225164852-8o8qqy0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231225164852-8o8qqy0","updated":"20231225164857"},"Children":[{"ID":"20231225164852-7d9tw8z","Type":"NodeParagraph","Properties":{"id":"20231225164852-7d9tw8z","updated":"20231225164857"},"Children":[{"Type":"NodeText","Data":"结束"}]}]}]},{"ID":"20231225164657-74qqv1y","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20231225164657-74qqv1y","updated":"20231225164659"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20231225164946-s94wqlm","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231225164946-s94wqlm","updated":"20231225164950"},"Children":[{"ID":"20231225164950-4ysvb2d","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231225164950-4ysvb2d","updated":"20231225164950"},"Children":[{"ID":"20231225164950-8s0gza4","Type":"NodeParagraph","Properties":{"id":"20231225164950-8s0gza4","updated":"20231225164950"},"Children":[{"Type":"NodeText","Data":"获取一个深培咖啡（DarkRoast）对象"}]}]}]},{"ID":"20231225165238-rqeao2b","Type":"NodeParagraph","Properties":{"id":"20231225165238-rqeao2b","updated":"20231225165406"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225165002-8nn05u5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeText","Data":"​​​"}]},{"ID":"20231225164701-f10x1hx","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231225164701-f10x1hx","updated":"20231225165033"},"Children":[{"ID":"20231225165017-t96d687","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231225165017-t96d687","updated":"20231225165033"},"Children":[{"ID":"20231225165017-2kxcmqn","Type":"NodeParagraph","Properties":{"id":"20231225165017-2kxcmqn","updated":"20231225165033"},"Children":[{"Type":"NodeText","Data":"获取摩卡（Mocha）调料对象来装饰它"}]}]}]},{"ID":"20231225165104-329vqnz","Type":"NodeParagraph","Properties":{"id":"20231225165104-329vqnz","updated":"20231225165402"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225165104-2qwqzlf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225165109-lljw2ku","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231225165109-lljw2ku","updated":"20231225165123"},"Children":[{"ID":"20231225165110-skvmwrq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231225165110-skvmwrq","updated":"20231225165123"},"Children":[{"ID":"20231225165110-yqq1n2w","Type":"NodeParagraph","Properties":{"id":"20231225165110-yqq1n2w","updated":"20231225165123"},"Children":[{"Type":"NodeText","Data":"以奶泡（Whip）调料对象来装饰摩卡（Mocha）调料对象"}]}]}]},{"ID":"20231225165155-w60h5w2","Type":"NodeParagraph","Properties":{"id":"20231225165155-w60h5w2","updated":"20231225165358"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225165155-j4xc0cb.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225165303-1lsltvn","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231225165303-1lsltvn","updated":"20231225165304"},"Children":[{"ID":"20231225165304-auuotqs","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20231225165304-auuotqs","updated":"20231225165304"},"Children":[{"ID":"20231225165304-0zy1vjz","Type":"NodeParagraph","Properties":{"id":"20231225165304-0zy1vjz","updated":"20231225165331"},"Children":[{"Type":"NodeText","Data":"逐层调用 cost"}]}]}]},{"ID":"20231225165349-bxwdkss","Type":"NodeParagraph","Properties":{"id":"20231225165349-bxwdkss","updated":"20231225165354"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231225165349-z9zhfyi.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20231225170347-tcc0ejz","Type":"NodeParagraph","Properties":{"id":"20231225170347-tcc0ejz","updated":"20231225170347"}},{"ID":"20231225170347-kozxzxj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231225170347-kozxzxj","updated":"20231225170430"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dGV4dA=="},{"Type":"NodeCodeBlockCode","Data":"1. 装饰者与其装饰的对象具有相同的超类型。\n2. 您可以使用一个或多个装饰者来包装一个对象。\n3. 鉴于装饰者与其装饰的对象具有相同的超类型，我们可以使用装饰过的对象替代原始（被包装的）对象。\n4. 装饰者在委托给其装饰的对象执行其余工作之前和/或之后添加自己的行为。\n5. 对象可以在任何时候进行装饰，因此我们可以在运行时以动态方式使用尽可能多的装饰者对对象进行装饰。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231225170435-ld6g1zr","Type":"NodeParagraph","Properties":{"id":"20231225170435-ld6g1zr"}}]}