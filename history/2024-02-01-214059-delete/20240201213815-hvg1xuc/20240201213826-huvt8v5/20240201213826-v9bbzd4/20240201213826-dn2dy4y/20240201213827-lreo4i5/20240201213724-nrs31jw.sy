{"ID":"20240201213724-nrs31jw","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240201213724-nrs31jw","title":"jvm-in-action","updated":"20240201213724"},"Children":[{"ID":"20240201213725-c9p9m9n","Type":"NodeThematicBreak","Properties":{"id":"20240201213725-c9p9m9n","updated":"20240201213725"}},{"ID":"20240201213726-kza6sf8","Type":"NodeParagraph","Properties":{"id":"20240201213726-kza6sf8","updated":"20240201213726"},"Children":[{"Type":"NodeText","Data":"title: JVM线上问题排查和性能调优案例"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"category: Java"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"tag:"}]},{"ID":"20240201213727-438g7k9","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213727-438g7k9","updated":"20240201213727"},"Children":[{"ID":"20240201213728-wfnfwwv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213728-wfnfwwv","updated":"20240201213728"},"Children":[{"ID":"20240201213729-41pnzrm","Type":"NodeParagraph","Properties":{"id":"20240201213729-41pnzrm","updated":"20240201213729"},"Children":[{"Type":"NodeText","Data":"JVM"}]}]}]},{"ID":"20240201213730-bmlhieu","Type":"NodeThematicBreak","Properties":{"id":"20240201213730-bmlhieu","updated":"20240201213730"}},{"ID":"20240201213731-5sv9hof","Type":"NodeParagraph","Properties":{"id":"20240201213731-5sv9hof","updated":"20240201213731"},"Children":[{"Type":"NodeText","Data":"JVM 线上问题排查和性能调优也是面试常问的一个问题，尤其是社招中大厂的面试。"}]},{"ID":"20240201213732-16ftxju","Type":"NodeParagraph","Properties":{"id":"20240201213732-16ftxju","updated":"20240201213732"},"Children":[{"Type":"NodeText","Data":"这篇文章，我会分享一些我看到的相关的案例。"}]},{"ID":"20240201213733-v4bzmvr","Type":"NodeParagraph","Properties":{"id":"20240201213733-v4bzmvr","updated":"20240201213733"},"Children":[{"Type":"NodeText","Data":"下面是正文。"}]},{"ID":"20240201213734-prrxwin","Type":"NodeParagraph","Properties":{"id":"20240201213734-prrxwin","updated":"20240201213734"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/7205141492264976445","TextMarkTextContent":"一次线上 OOM 问题分析 - 艾小仙 - 2023"}]},{"ID":"20240201213735-e1n3p0k","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213735-e1n3p0k","updated":"20240201213735"},"Children":[{"ID":"20240201213736-xszj724","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213736-xszj724","updated":"20240201213736"},"Children":[{"ID":"20240201213737-aftsht6","Type":"NodeParagraph","Properties":{"id":"20240201213737-aftsht6","updated":"20240201213737"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"现象"},{"Type":"NodeText","Data":"：线上某个服务有接口非常慢，通过监控链路查看发现，中间的 GAP 时间非常大，实际接口并没有消耗很多时间，并且在那段时间里有很多这样的请求。"}]}]},{"ID":"20240201213738-3404ppq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213738-3404ppq","updated":"20240201213738"},"Children":[{"ID":"20240201213739-fxp5qg2","Type":"NodeParagraph","Properties":{"id":"20240201213739-fxp5qg2","updated":"20240201213739"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"分析"},{"Type":"NodeText","Data":"：使用 JDK 自带的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jvisualvm"},{"Type":"NodeText","Data":"分析 dump 文件(MAT 也能分析)。"}]}]},{"ID":"20240201213740-un2jzr7","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213740-un2jzr7","updated":"20240201213740"},"Children":[{"ID":"20240201213741-3baadux","Type":"NodeParagraph","Properties":{"id":"20240201213741-3baadux","updated":"20240201213741"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"建议"},{"Type":"NodeText","Data":"：对于 SQL 语句，如果监测到没有"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"where"},{"Type":"NodeText","Data":"条件的全表查询应该默认增加一个合适的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"limit"},{"Type":"NodeText","Data":"作为限制，防止这种问题拖垮整个系统"}]}]},{"ID":"20240201213742-nnopcpn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213742-nnopcpn","updated":"20240201213742"},"Children":[{"ID":"20240201213743-1yiw0g1","Type":"NodeParagraph","Properties":{"id":"20240201213743-1yiw0g1","updated":"20240201213743"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"资料"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://heapdump.cn/article/3489050","TextMarkTextContent":"实战案例：记一次 dump 文件分析历程转载 - HeapDump - 2022"},{"Type":"NodeText","Data":"。"}]}]}]},{"ID":"20240201213744-n7rxs5z","Type":"NodeParagraph","Properties":{"id":"20240201213744-n7rxs5z","updated":"20240201213744"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://www.cnblogs.com/mylibs/p/production-accident-0002.html","TextMarkTextContent":"生产事故-记一次特殊的 OOM 排查 - 程语有云 - 2023"}]},{"ID":"20240201213745-zhpfrpi","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213745-zhpfrpi","updated":"20240201213745"},"Children":[{"ID":"20240201213746-yy1q54u","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213746-yy1q54u","updated":"20240201213746"},"Children":[{"ID":"20240201213747-3obztg5","Type":"NodeParagraph","Properties":{"id":"20240201213747-3obztg5","updated":"20240201213747"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"现象"},{"Type":"NodeText","Data":"：网络没有问题的情况下，系统某开放接口从 2023 年 3 月 10 日 14 时许开始无法访问和使用。"}]}]},{"ID":"20240201213748-91ohd4e","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213748-91ohd4e","updated":"20240201213748"},"Children":[{"ID":"20240201213749-ts5spni","Type":"NodeParagraph","Properties":{"id":"20240201213749-ts5spni","updated":"20240201213749"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"临时解决办法"},{"Type":"NodeText","Data":"：紧急回滚至上一稳定版本。"}]}]},{"ID":"20240201213750-5phwzri","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213750-5phwzri","updated":"20240201213750"},"Children":[{"ID":"20240201213751-7g7f7wt","Type":"NodeParagraph","Properties":{"id":"20240201213751-7g7f7wt","updated":"20240201213751"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"分析"},{"Type":"NodeText","Data":"：使用 MAT (Memory Analyzer Tool)工具分析 dump 文件。"}]}]},{"ID":"20240201213752-gy0iwme","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213752-gy0iwme","updated":"20240201213752"},"Children":[{"ID":"20240201213753-ifd8rpv","Type":"NodeParagraph","Properties":{"id":"20240201213753-ifd8rpv","updated":"20240201213753"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"建议"},{"Type":"NodeText","Data":"：正常情况下，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-Xmn"},{"Type":"NodeText","Data":"参数（控制 Young 区的大小）总是应当小于"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-Xmx"},{"Type":"NodeText","Data":"参数（控制堆内存的最大大小），否则就会触发 OOM 错误。"}]}]},{"ID":"20240201213754-4v4juon","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213754-4v4juon","updated":"20240201213754"},"Children":[{"ID":"20240201213755-0zjiwet","Type":"NodeParagraph","Properties":{"id":"20240201213755-0zjiwet","updated":"20240201213755"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"资料"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://javaguide.cn/java/jvm/jvm-parameters-intro.html","TextMarkTextContent":"最重要的 JVM 参数总结 - JavaGuide - 2023"}]}]}]},{"ID":"20240201213756-sdht1ea","Type":"NodeParagraph","Properties":{"id":"20240201213756-sdht1ea","updated":"20240201213756"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/7078624931826794503","TextMarkTextContent":"一次大量 JVM Native 内存泄露的排查分析（64M 问题） - 掘金 - 2022"}]},{"ID":"20240201213757-wtf5tmx","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213757-wtf5tmx","updated":"20240201213757"},"Children":[{"ID":"20240201213758-18nuv8j","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213758-18nuv8j","updated":"20240201213758"},"Children":[{"ID":"20240201213759-f1ouq1f","Type":"NodeParagraph","Properties":{"id":"20240201213759-f1ouq1f","updated":"20240201213759"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"现象"},{"Type":"NodeText","Data":"：线上项目刚启动完使用 top 命令查看 RES 占用了超过 1.5G。"}]}]},{"ID":"20240201213760-4m0k4hp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213760-4m0k4hp","updated":"20240201213760"},"Children":[{"ID":"20240201213761-6u9sh8q","Type":"NodeParagraph","Properties":{"id":"20240201213761-6u9sh8q","updated":"20240201213761"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"分析"},{"Type":"NodeText","Data":"：整个分析流程用到了较多工作，可以跟着作者思路一步一步来，值得学习借鉴。"}]}]},{"ID":"20240201213762-h26h1c9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213762-h26h1c9","updated":"20240201213762"},"Children":[{"ID":"20240201213763-rmyln28","Type":"NodeParagraph","Properties":{"id":"20240201213763-rmyln28","updated":"20240201213763"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"建议"},{"Type":"NodeText","Data":"：远离 Hibernate。"}]}]},{"ID":"20240201213764-g0gtsvp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213764-g0gtsvp","updated":"20240201213764"},"Children":[{"ID":"20240201213765-14415z6","Type":"NodeParagraph","Properties":{"id":"20240201213765-14415z6","updated":"20240201213765"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"资料"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://liam.page/2020/07/17/memory-stat-in-TOP/","TextMarkTextContent":"Linux top 命令里的内存相关字段（VIRT, RES, SHR, CODE, DATA）"}]}]}]},{"ID":"20240201213766-a3zg436","Type":"NodeParagraph","Properties":{"id":"20240201213766-a3zg436","updated":"20240201213766"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://www.heapdump.cn/article/1661497","TextMarkTextContent":"YGC 问题排查，又让我涨姿势了！ - IT 人的职场进阶 - 2021"}]},{"ID":"20240201213767-elq5d9l","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213767-elq5d9l","updated":"20240201213767"},"Children":[{"ID":"20240201213768-eqe34hc","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213768-eqe34hc","updated":"20240201213768"},"Children":[{"ID":"20240201213769-oc0aoan","Type":"NodeParagraph","Properties":{"id":"20240201213769-oc0aoan","updated":"20240201213769"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"现象"},{"Type":"NodeText","Data":"：广告服务在新版本上线后，收到了大量的服务超时告警。"}]}]},{"ID":"20240201213770-v4685wb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213770-v4685wb","updated":"20240201213770"},"Children":[{"ID":"20240201213771-67nzpjs","Type":"NodeParagraph","Properties":{"id":"20240201213771-67nzpjs","updated":"20240201213771"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"分析"},{"Type":"NodeText","Data":"：使用 MAT (Memory Analyzer Tool) 工具分析 dump 文件。"}]}]},{"ID":"20240201213772-mprnb8f","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213772-mprnb8f","updated":"20240201213772"},"Children":[{"ID":"20240201213773-4faudj8","Type":"NodeParagraph","Properties":{"id":"20240201213773-4faudj8","updated":"20240201213773"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"建议"},{"Type":"NodeText","Data":"：学会 YGC（Young GC） 问题的排查思路，掌握 YGC 的相关知识点。"}]}]}]},{"ID":"20240201213774-st2a12x","Type":"NodeParagraph","Properties":{"id":"20240201213774-st2a12x","updated":"20240201213774"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://shuyi.tech/archives/have-a-try-in-jvm-combat","TextMarkTextContent":"听说 JVM 性能优化很难？今天我小试了一把！ - 陈树义 - 2021"}]},{"ID":"20240201213775-fripjvc","Type":"NodeParagraph","Properties":{"id":"20240201213775-fripjvc","updated":"20240201213775"},"Children":[{"Type":"NodeText","Data":"通过观察 GC 频率和停顿时间，来进行 JVM 内存空间调整，使其达到最合理的状态。调整过程记得小步快跑，避免内存剧烈波动影响线上服务。 这其实是最为简单的一种 JVM 性能调优方式了，可以算是粗调吧。"}]},{"ID":"20240201213776-s1i6iou","Type":"NodeParagraph","Properties":{"id":"20240201213776-s1i6iou","updated":"20240201213776"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://mp.weixin.qq.com/s/df1uxHWUXzhErxW1sZ6OvQ","TextMarkTextContent":"你们要的线上 GC 问题案例来啦 - 编了个程 - 2021"}]},{"ID":"20240201213777-edoh342","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213777-edoh342","updated":"20240201213777"},"Children":[{"ID":"20240201213778-wfcud43","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213778-wfcud43","updated":"20240201213778"},"Children":[{"ID":"20240201213779-vxevv7o","Type":"NodeParagraph","Properties":{"id":"20240201213779-vxevv7o","updated":"20240201213779"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"案例 1"},{"Type":"NodeText","Data":"：使用 guava cache 的时候，没有设置最大缓存数量和弱引用，导致频繁触发 Young GC"}]}]},{"ID":"20240201213780-5igel6b","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213780-5igel6b","updated":"20240201213780"},"Children":[{"ID":"20240201213781-phc6oj6","Type":"NodeParagraph","Properties":{"id":"20240201213781-phc6oj6","updated":"20240201213781"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"案例 2"},{"Type":"NodeText","Data":"： 对于一个查询和排序分页的 SQL，同时这个 SQL 需要 join 多张表，在分库分表下，直接调用 SQL 性能很差。于是，查单表，再在内存排序分页，用了一个 List 来保存数据，而有些数据量大，造成了这个现象。"}]}]}]},{"ID":"20240201213782-p7t4fiq","Type":"NodeParagraph","Properties":{"id":"20240201213782-p7t4fiq","updated":"20240201213782"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://tech.meituan.com/2020/11/12/java-9-cms-gc.html","TextMarkTextContent":"Java 中 9 种常见的 CMS GC 问题分析与解决 - 美团技术团 - 2020"}]},{"ID":"20240201213783-sywnnfn","Type":"NodeParagraph","Properties":{"id":"20240201213783-sywnnfn","updated":"20240201213783"},"Children":[{"Type":"NodeText","Data":"这篇文章共 2w+ 字，详细介绍了 GC 基础，总结了 CMS GC 的一些常见问题分析与解决办法。"}]},{"ID":"20240201213784-3iituue","Type":"NodeParagraph","Properties":{"id":"20240201213784-3iituue","updated":"20240201213784"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/7311623433817571365","TextMarkTextContent":"给祖传系统做了点 GC 调优，暂停时间降低了 90% - 京东云技术团队 - 2023"}]},{"ID":"20240201213785-ogk40ng","Type":"NodeParagraph","Properties":{"id":"20240201213785-ogk40ng","updated":"20240201213785"},"Children":[{"Type":"NodeText","Data":"这篇文章提到了一个在规则引擎系统中遇到的 GC（垃圾回收）问题，主要表现为系统在启动后发生了一次较长的 Young GC（年轻代垃圾回收）导致性能下降。经过分析，问题的核心在于动态对象年龄判定机制，它导致了过早的对象晋升，引起了长时间的垃圾回收。"}]},{"ID":"20240201213786-h2bbb5f","Type":"NodeHTMLBlock","Data":"\u003cdiv\u003e\n\u003c!-- @include: @article-footer.snippet.md --\u003e\n\u003c/div\u003e","HtmlBlockType":2,"Properties":{"id":"20240201213786-h2bbb5f","updated":"20240201213786"}}]}