{"ID":"20240201213609-92nci8l","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240201213609-92nci8l","title":"jdk-monitoring-and-troubleshooting-tools","updated":"20240201213609"},"Children":[{"ID":"20240201213610-zuv27jq","Type":"NodeThematicBreak","Properties":{"id":"20240201213610-zuv27jq","updated":"20240201213610"}},{"ID":"20240201213611-4434hr3","Type":"NodeParagraph","Properties":{"id":"20240201213611-4434hr3","updated":"20240201213611"},"Children":[{"Type":"NodeText","Data":"title: JDK监控和故障处理工具总结"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"category: Java"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"tag:"}]},{"ID":"20240201213612-ae22hzm","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213612-ae22hzm","updated":"20240201213612"},"Children":[{"ID":"20240201213613-spfslsg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213613-spfslsg","updated":"20240201213613"},"Children":[{"ID":"20240201213614-vtq5gkv","Type":"NodeParagraph","Properties":{"id":"20240201213614-vtq5gkv","updated":"20240201213614"},"Children":[{"Type":"NodeText","Data":"JVM"}]}]}]},{"ID":"20240201213615-qdixeye","Type":"NodeThematicBreak","Properties":{"id":"20240201213615-qdixeye","updated":"20240201213615"}},{"ID":"20240201213616-2mr33v2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213616-2mr33v2","updated":"20240201213616"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"JDK 命令行工具"}]},{"ID":"20240201213617-qqveclv","Type":"NodeParagraph","Properties":{"id":"20240201213617-qqveclv","updated":"20240201213617"},"Children":[{"Type":"NodeText","Data":"这些命令在 JDK 安装目录下的 bin 目录下："}]},{"ID":"20240201213618-ewgpdyg","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213618-ewgpdyg","updated":"20240201213618"},"Children":[{"ID":"20240201213619-z6s1kcb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213619-z6s1kcb","updated":"20240201213619"},"Children":[{"ID":"20240201213620-lm4drdf","Type":"NodeParagraph","Properties":{"id":"20240201213620-lm4drdf","updated":"20240201213620"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jps"},{"Type":"NodeText","Data":" (JVM Process Status）: 类似 UNIX 的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ps"},{"Type":"NodeText","Data":" 命令。用于查看所有 Java 进程的启动类、传入参数和 Java 虚拟机参数等信息；"}]}]},{"ID":"20240201213621-f1igdxe","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213621-f1igdxe","updated":"20240201213621"},"Children":[{"ID":"20240201213622-gn5q0ys","Type":"NodeParagraph","Properties":{"id":"20240201213622-gn5q0ys","updated":"20240201213622"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstat"},{"Type":"NodeText","Data":"（JVM Statistics Monitoring Tool）: 用于收集 HotSpot 虚拟机各方面的运行数据;"}]}]},{"ID":"20240201213623-zz0ob4l","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213623-zz0ob4l","updated":"20240201213623"},"Children":[{"ID":"20240201213624-4gozrhn","Type":"NodeParagraph","Properties":{"id":"20240201213624-4gozrhn","updated":"20240201213624"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jinfo"},{"Type":"NodeText","Data":" (Configuration Info for Java) : Configuration Info for Java,显示虚拟机配置信息;"}]}]},{"ID":"20240201213625-lgmy06a","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213625-lgmy06a","updated":"20240201213625"},"Children":[{"ID":"20240201213626-fa4u1dx","Type":"NodeParagraph","Properties":{"id":"20240201213626-fa4u1dx","updated":"20240201213626"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":" (Memory Map for Java) : 生成堆转储快照;"}]}]},{"ID":"20240201213627-8kti8qi","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213627-8kti8qi","updated":"20240201213627"},"Children":[{"ID":"20240201213628-38u3nl3","Type":"NodeParagraph","Properties":{"id":"20240201213628-38u3nl3","updated":"20240201213628"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jhat"},{"Type":"NodeText","Data":" (JVM Heap Dump Browser) : 用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果;"}]}]},{"ID":"20240201213629-kw940ur","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213629-kw940ur","updated":"20240201213629"},"Children":[{"ID":"20240201213630-9rsjfqf","Type":"NodeParagraph","Properties":{"id":"20240201213630-9rsjfqf","updated":"20240201213630"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":" (Stack Trace for Java) : 生成虚拟机当前时刻的线程快照，线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合。"}]}]}]},{"ID":"20240201213631-1yxjyt6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213631-1yxjyt6","updated":"20240201213631"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps"},{"Type":"NodeText","Data":":查看所有 Java 进程"}]},{"ID":"20240201213632-d1mupks","Type":"NodeParagraph","Properties":{"id":"20240201213632-d1mupks","updated":"20240201213632"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps"},{"Type":"NodeText","Data":"(JVM Process Status) 命令类似 UNIX 的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ps"},{"Type":"NodeText","Data":" 命令。"}]},{"ID":"20240201213633-fmwjmex","Type":"NodeParagraph","Properties":{"id":"20240201213633-fmwjmex","updated":"20240201213633"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps"},{"Type":"NodeText","Data":"：显示虚拟机执行主类名称以及这些进程的本地虚拟机唯一 ID（Local Virtual Machine Identifier,LVMID）。"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps -q"},{"Type":"NodeText","Data":"：只输出进程的本地虚拟机唯一 ID。"}]},{"ID":"20240201213634-ww5z112","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213634-ww5z112","updated":"20240201213634"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejps\n7360 NettyClient2\n17396\n7972 Launcher\n16504 Jps\n17340 NettyServer\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213635-x2tufbl","Type":"NodeParagraph","Properties":{"id":"20240201213635-x2tufbl","updated":"20240201213635"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps -l"},{"Type":"NodeText","Data":":输出主类的全名，如果进程执行的是 Jar 包，输出 Jar 路径。"}]},{"ID":"20240201213636-cksmk41","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213636-cksmk41","updated":"20240201213636"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejps -l\n7360 firstNettyDemo.NettyClient2\n17396\n7972 org.jetbrains.jps.cmdline.Launcher\n16492 sun.tools.jps.Jps\n17340 firstNettyDemo.NettyServer\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213637-l5lcz0k","Type":"NodeParagraph","Properties":{"id":"20240201213637-l5lcz0k","updated":"20240201213637"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps -v"},{"Type":"NodeText","Data":"：输出虚拟机进程启动时 JVM 参数。"}]},{"ID":"20240201213638-7vwjd5i","Type":"NodeParagraph","Properties":{"id":"20240201213638-7vwjd5i","updated":"20240201213638"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jps -m"},{"Type":"NodeText","Data":"：输出传递给 Java 进程 main() 函数的参数。"}]},{"ID":"20240201213639-05h2t8u","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213639-05h2t8u","updated":"20240201213639"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat"},{"Type":"NodeText","Data":": 监视虚拟机各种运行状态信息"}]},{"ID":"20240201213640-kr5qlz3","Type":"NodeParagraph","Properties":{"id":"20240201213640-kr5qlz3","updated":"20240201213640"},"Children":[{"Type":"NodeText","Data":"jstat（JVM Statistics Monitoring Tool） 使用于监视虚拟机各种运行状态信息的命令行工具。 它可以显示本地或者远程（需要远程主机提供 RMI 支持）虚拟机进程中的类信息、内存、垃圾收集、JIT 编译等运行数据，在没有 GUI，只提供了纯文本控制台环境的服务器上，它将是运行期间定位虚拟机性能问题的首选工具。"}]},{"ID":"20240201213641-rhqp13c","Type":"NodeParagraph","Properties":{"id":"20240201213641-rhqp13c","updated":"20240201213641"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstat"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 命令使用格式："}]},{"ID":"20240201213642-yza88oi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213642-yza88oi","updated":"20240201213642"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"jstat -\u003coption\u003e [-t] [-h\u003clines\u003e] \u003cvmid\u003e [\u003cinterval\u003e [\u003ccount\u003e]]\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213643-j1dtk2d","Type":"NodeParagraph","Properties":{"id":"20240201213643-j1dtk2d","updated":"20240201213643"},"Children":[{"Type":"NodeText","Data":"比如 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gc -h3 31736 1000 10"},{"Type":"NodeText","Data":"表示分析进程 id 为 31736 的 gc 情况，每隔 1000ms 打印一次记录，打印 10 次停止，每 3 行后打印指标头部。"}]},{"ID":"20240201213644-c7gt2sx","Type":"NodeParagraph","Properties":{"id":"20240201213644-c7gt2sx","updated":"20240201213644"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"常见的 option 如下："}]},{"ID":"20240201213645-ujil5vy","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213645-ujil5vy","updated":"20240201213645"},"Children":[{"ID":"20240201213646-5oczfuz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213646-5oczfuz","updated":"20240201213646"},"Children":[{"ID":"20240201213647-mxi7h5p","Type":"NodeParagraph","Properties":{"id":"20240201213647-mxi7h5p","updated":"20240201213647"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -class vmid"},{"Type":"NodeText","Data":"：显示 ClassLoader 的相关信息；"}]}]},{"ID":"20240201213648-su9010e","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213648-su9010e","updated":"20240201213648"},"Children":[{"ID":"20240201213649-afrzick","Type":"NodeParagraph","Properties":{"id":"20240201213649-afrzick","updated":"20240201213649"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -compiler vmid"},{"Type":"NodeText","Data":"：显示 JIT 编译的相关信息；"}]}]},{"ID":"20240201213650-w8xm2qq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213650-w8xm2qq","updated":"20240201213650"},"Children":[{"ID":"20240201213651-6k41d4x","Type":"NodeParagraph","Properties":{"id":"20240201213651-6k41d4x","updated":"20240201213651"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gc vmid"},{"Type":"NodeText","Data":"：显示与 GC 相关的堆信息；"}]}]},{"ID":"20240201213652-573m8b5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213652-573m8b5","updated":"20240201213652"},"Children":[{"ID":"20240201213653-xzj4aee","Type":"NodeParagraph","Properties":{"id":"20240201213653-xzj4aee","updated":"20240201213653"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gccapacity vmid"},{"Type":"NodeText","Data":"：显示各个代的容量及使用情况；"}]}]},{"ID":"20240201213654-ppqggot","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213654-ppqggot","updated":"20240201213654"},"Children":[{"ID":"20240201213655-9kv3m5e","Type":"NodeParagraph","Properties":{"id":"20240201213655-9kv3m5e","updated":"20240201213655"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcnew vmid"},{"Type":"NodeText","Data":"：显示新生代信息；"}]}]},{"ID":"20240201213656-4y2lo2x","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213656-4y2lo2x","updated":"20240201213656"},"Children":[{"ID":"20240201213657-ckzc07t","Type":"NodeParagraph","Properties":{"id":"20240201213657-ckzc07t","updated":"20240201213657"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcnewcapcacity vmid"},{"Type":"NodeText","Data":"：显示新生代大小与使用情况；"}]}]},{"ID":"20240201213658-t9xg64s","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213658-t9xg64s","updated":"20240201213658"},"Children":[{"ID":"20240201213659-m5hcabe","Type":"NodeParagraph","Properties":{"id":"20240201213659-m5hcabe","updated":"20240201213659"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcold vmid"},{"Type":"NodeText","Data":"：显示老年代和永久代的行为统计，从 jdk1.8 开始,该选项仅表示老年代，因为永久代被移除了；"}]}]},{"ID":"20240201213660-ihvjhny","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213660-ihvjhny","updated":"20240201213660"},"Children":[{"ID":"20240201213661-4wadvwj","Type":"NodeParagraph","Properties":{"id":"20240201213661-4wadvwj","updated":"20240201213661"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcoldcapacity vmid"},{"Type":"NodeText","Data":"：显示老年代的大小；"}]}]},{"ID":"20240201213662-a8gkzi3","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213662-a8gkzi3","updated":"20240201213662"},"Children":[{"ID":"20240201213663-p3zcs8m","Type":"NodeParagraph","Properties":{"id":"20240201213663-p3zcs8m","updated":"20240201213663"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcpermcapacity vmid"},{"Type":"NodeText","Data":"：显示永久代大小，从 jdk1.8 开始,该选项不存在了，因为永久代被移除了；"}]}]},{"ID":"20240201213664-39fw5vp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213664-39fw5vp","updated":"20240201213664"},"Children":[{"ID":"20240201213665-zzlpfbw","Type":"NodeParagraph","Properties":{"id":"20240201213665-zzlpfbw","updated":"20240201213665"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstat -gcutil vmid"},{"Type":"NodeText","Data":"：显示垃圾收集信息；"}]}]}]},{"ID":"20240201213666-ebc4yi9","Type":"NodeParagraph","Properties":{"id":"20240201213666-ebc4yi9","updated":"20240201213666"},"Children":[{"Type":"NodeText","Data":"另外，加上 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-t"},{"Type":"NodeText","Data":"参数可以在输出信息上加一个 Timestamp 列，显示程序的运行时间。"}]},{"ID":"20240201213667-c0u633b","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213667-c0u633b","updated":"20240201213667"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jinfo"},{"Type":"NodeText","Data":": 实时地查看和调整虚拟机各项参数"}]},{"ID":"20240201213668-uj42wdx","Type":"NodeParagraph","Properties":{"id":"20240201213668-uj42wdx","updated":"20240201213668"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jinfo vmid"},{"Type":"NodeText","Data":" :输出当前 jvm 进程的全部参数和系统属性 (第一部分是系统的属性，第二部分是 JVM 的参数)。"}]},{"ID":"20240201213669-l98s1wm","Type":"NodeParagraph","Properties":{"id":"20240201213669-l98s1wm","updated":"20240201213669"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jinfo -flag name vmid"},{"Type":"NodeText","Data":" :输出对应名称的参数的具体值。比如输出 MaxHeapSize、查看当前 jvm 进程是否开启打印 GC 日志 ( "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-XX:PrintGCDetails"},{"Type":"NodeText","Data":" :详细 GC 日志模式，这两个都是默认关闭的)。"}]},{"ID":"20240201213670-gkjy5o6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213670-gkjy5o6","updated":"20240201213670"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejinfo  -flag MaxHeapSize 17340\n-XX:MaxHeapSize=2124414976\nC:\\Users\\SnailClimb\u003ejinfo  -flag PrintGC 17340\n-XX:-PrintGC\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213671-sexyjs1","Type":"NodeParagraph","Properties":{"id":"20240201213671-sexyjs1","updated":"20240201213671"},"Children":[{"Type":"NodeText","Data":"使用 jinfo 可以在不重启虚拟机的情况下，可以动态的修改 jvm 的参数。尤其在线上的环境特别有用,请看下面的例子："}]},{"ID":"20240201213672-fska8k4","Type":"NodeParagraph","Properties":{"id":"20240201213672-fska8k4","updated":"20240201213672"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jinfo -flag [+|-]name vmid"},{"Type":"NodeText","Data":" 开启或者关闭对应名称的参数。"}]},{"ID":"20240201213673-j8lazra","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213673-j8lazra","updated":"20240201213673"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejinfo  -flag  PrintGC 17340\n-XX:-PrintGC\n\nC:\\Users\\SnailClimb\u003ejinfo  -flag  +PrintGC 17340\n\nC:\\Users\\SnailClimb\u003ejinfo  -flag  PrintGC 17340\n-XX:+PrintGC\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213674-uu1i9fw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213674-uu1i9fw","updated":"20240201213674"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":":生成堆转储快照"}]},{"ID":"20240201213675-xfs7twh","Type":"NodeParagraph","Properties":{"id":"20240201213675-xfs7twh","updated":"20240201213675"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":"（Memory Map for Java）命令用于生成堆转储快照。 如果不使用 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":" 命令，要想获取 Java 堆转储，可以使用 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"“-XX:+HeapDumpOnOutOfMemoryError”"},{"Type":"NodeText","Data":" 参数，可以让虚拟机在 OOM 异常出现之后自动生成 dump 文件，Linux 命令下可以通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"kill -3"},{"Type":"NodeText","Data":" 发送进程退出信号也能拿到 dump 文件。"}]},{"ID":"20240201213676-rniiw9n","Type":"NodeParagraph","Properties":{"id":"20240201213676-rniiw9n","updated":"20240201213676"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":" 的作用并不仅仅是为了获取 dump 文件，它还可以查询 finalizer 执行队列、Java 堆和永久代的详细信息，如空间使用率、当前使用的是哪种收集器等。和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jinfo"},{"Type":"NodeText","Data":"一样，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jmap"},{"Type":"NodeText","Data":"有不少功能在 Windows 平台下也是受限制的。"}]},{"ID":"20240201213677-co8jec2","Type":"NodeParagraph","Properties":{"id":"20240201213677-co8jec2","updated":"20240201213677"},"Children":[{"Type":"NodeText","Data":"示例：将指定应用程序的堆快照输出到桌面。后面，可以通过 jhat、Visual VM 等工具分析该堆文件。"}]},{"ID":"20240201213678-qu9mthx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213678-qu9mthx","updated":"20240201213678"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejmap -dump:format=b,file=C:\\Users\\SnailClimb\\Desktop\\heap.hprof 17340\nDumping heap to C:\\Users\\SnailClimb\\Desktop\\heap.hprof ...\nHeap dump file created\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213679-gvq2sjw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213679-gvq2sjw","updated":"20240201213679"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jhat"},{"Type":"NodeText","Data":": 分析 heapdump 文件"}]},{"ID":"20240201213680-rv2hb5r","Type":"NodeParagraph","Properties":{"id":"20240201213680-rv2hb5r","updated":"20240201213680"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jhat"},{"Type":"NodeText","Data":" 用于分析 heapdump 文件，它会建立一个 HTTP/HTML 服务器，让用户可以在浏览器上查看分析结果。"}]},{"ID":"20240201213681-639409r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213681-639409r","updated":"20240201213681"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejhat C:\\Users\\SnailClimb\\Desktop\\heap.hprof\nReading from C:\\Users\\SnailClimb\\Desktop\\heap.hprof...\nDump file created Sat May 04 12:30:31 CST 2019\nSnapshot read, resolving...\nResolving 131419 objects...\nChasing references, expect 26 dots..........................\nEliminating duplicate references..........................\nSnapshot resolved.\nStarted HTTP server on port 7000\nServer is ready.\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213682-lhzi7mo","Type":"NodeParagraph","Properties":{"id":"20240201213682-lhzi7mo","updated":"20240201213682"},"Children":[{"Type":"NodeText","Data":"访问 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://localhost:7000/","TextMarkTextContent":"http://localhost:7000/"}]},{"ID":"20240201213683-ae9tyef","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213683-ae9tyef","updated":"20240201213683"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":" :生成虚拟机当前时刻的线程快照"}]},{"ID":"20240201213684-jebbeez","Type":"NodeParagraph","Properties":{"id":"20240201213684-jebbeez","updated":"20240201213684"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":"（Stack Trace for Java）命令用于生成虚拟机当前时刻的线程快照。线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合."}]},{"ID":"20240201213685-w1c86n1","Type":"NodeParagraph","Properties":{"id":"20240201213685-w1c86n1","updated":"20240201213685"},"Children":[{"Type":"NodeText","Data":"生成线程快照的目的主要是定位线程长时间出现停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等都是导致线程长时间停顿的原因。线程出现停顿的时候通过"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":"来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做些什么事情，或者在等待些什么资源。"}]},{"ID":"20240201213686-jo4uerq","Type":"NodeParagraph","Properties":{"id":"20240201213686-jo4uerq","updated":"20240201213686"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"下面是一个线程死锁的代码。我们下面会通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstack"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 命令进行死锁检查，输出死锁信息，找到发生死锁的线程。"}]},{"ID":"20240201213687-7af970t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213687-7af970t","updated":"20240201213687"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"public class DeadLockDemo {\n    private static Object resource1 = new Object();//资源 1\n    private static Object resource2 = new Object();//资源 2\n\n    public static void main(String[] args) {\n        new Thread(() -\u003e {\n            synchronized (resource1) {\n                System.out.println(Thread.currentThread() + \"get resource1\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource2\");\n                synchronized (resource2) {\n                    System.out.println(Thread.currentThread() + \"get resource2\");\n                }\n            }\n        }, \"线程 1\").start();\n\n        new Thread(() -\u003e {\n            synchronized (resource2) {\n                System.out.println(Thread.currentThread() + \"get resource2\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(Thread.currentThread() + \"waiting get resource1\");\n                synchronized (resource1) {\n                    System.out.println(Thread.currentThread() + \"get resource1\");\n                }\n            }\n        }, \"线程 2\").start();\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213688-b6cgtt0","Type":"NodeParagraph","Properties":{"id":"20240201213688-b6cgtt0","updated":"20240201213688"},"Children":[{"Type":"NodeText","Data":"Output"}]},{"ID":"20240201213689-9wcjgev","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cGxhaW4=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213689-9wcjgev","updated":"20240201213689"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW4=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Thread[线程 1,5,main]get resource1\nThread[线程 2,5,main]get resource2\nThread[线程 1,5,main]waiting get resource2\nThread[线程 2,5,main]waiting get resource1\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213690-cohy2zy","Type":"NodeParagraph","Properties":{"id":"20240201213690-cohy2zy","updated":"20240201213690"},"Children":[{"Type":"NodeText","Data":"线程 A 通过 synchronized (resource1) 获得 resource1 的监视器锁，然后通过"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Thread.sleep(1000);"},{"Type":"NodeText","Data":"让线程 A 休眠 1s 为的是让线程 B 得到执行然后获取到 resource2 的监视器锁。线程 A 和线程 B 休眠结束了都开始企图请求获取对方的资源，然后这两个线程就会陷入互相等待的状态，这也就产生了死锁。"}]},{"ID":"20240201213691-on8yc64","Type":"NodeParagraph","Properties":{"id":"20240201213691-on8yc64","updated":"20240201213691"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"jstack"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 命令分析："}]},{"ID":"20240201213692-drnq6gf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213692-drnq6gf","updated":"20240201213692"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"C:\\Users\\SnailClimb\u003ejps\n13792 KotlinCompileDaemon\n7360 NettyClient2\n17396\n7972 Launcher\n8932 Launcher\n9256 DeadLockDemo\n10764 Jps\n17340 NettyServer\n\nC:\\Users\\SnailClimb\u003ejstack 9256\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213693-zsm52b9","Type":"NodeParagraph","Properties":{"id":"20240201213693-zsm52b9","updated":"20240201213693"},"Children":[{"Type":"NodeText","Data":"输出的部分内容如下："}]},{"ID":"20240201213694-fy3h5mg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cG93ZXJzaGVsbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213694-fy3h5mg","updated":"20240201213694"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cG93ZXJzaGVsbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Found one Java-level deadlock:\n=============================\n\"线程 2\":\n  waiting to lock monitor 0x000000000333e668 (object 0x00000000d5efe1c0, a java.lang.Object),\n  which is held by \"线程 1\"\n\"线程 1\":\n  waiting to lock monitor 0x000000000333be88 (object 0x00000000d5efe1d0, a java.lang.Object),\n  which is held by \"线程 2\"\n\nJava stack information for the threads listed above:\n===================================================\n\"线程 2\":\n        at DeadLockDemo.lambda$main$1(DeadLockDemo.java:31)\n        - waiting to lock \u003c0x00000000d5efe1c0\u003e (a java.lang.Object)\n        - locked \u003c0x00000000d5efe1d0\u003e (a java.lang.Object)\n        at DeadLockDemo$$Lambda$2/1078694789.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:748)\n\"线程 1\":\n        at DeadLockDemo.lambda$main$0(DeadLockDemo.java:16)\n        - waiting to lock \u003c0x00000000d5efe1d0\u003e (a java.lang.Object)\n        - locked \u003c0x00000000d5efe1c0\u003e (a java.lang.Object)\n        at DeadLockDemo$$Lambda$1/1324119927.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:748)\n\nFound 1 deadlock.\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213695-wuwt7hp","Type":"NodeParagraph","Properties":{"id":"20240201213695-wuwt7hp","updated":"20240201213695"},"Children":[{"Type":"NodeText","Data":"可以看到 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":" 命令已经帮我们找到发生死锁的线程的具体信息。"}]},{"ID":"20240201213696-pn8abdd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213696-pn8abdd","updated":"20240201213696"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"JDK 可视化分析工具"}]},{"ID":"20240201213697-fhb6mf3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213697-fhb6mf3","updated":"20240201213697"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"JConsole:Java 监视与管理控制台"}]},{"ID":"20240201213698-fzo9jbj","Type":"NodeParagraph","Properties":{"id":"20240201213698-fzo9jbj","updated":"20240201213698"},"Children":[{"Type":"NodeText","Data":"JConsole 是基于 JMX 的可视化监视、管理工具。可以很方便的监视本地及远程服务器的 java 进程的内存使用情况。你可以在控制台输入"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jconsole"},{"Type":"NodeText","Data":"命令启动或者在 JDK 目录下的 bin 目录找到"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jconsole.exe"},{"Type":"NodeText","Data":"然后双击启动。"}]},{"ID":"20240201213699-q9j89lu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240201213699-q9j89lu","updated":"20240201213699"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"连接 Jconsole"}]},{"ID":"20240201213700-qf1v2h2","Type":"NodeParagraph","Properties":{"id":"20240201213700-qf1v2h2","updated":"20240201213700"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"连接 Jconsole","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/1JConsole连接-20240201213827-4tq1yw6.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213701-r3nukz6","Type":"NodeParagraph","Properties":{"id":"20240201213701-r3nukz6","updated":"20240201213701"},"Children":[{"Type":"NodeText","Data":"如果需要使用 JConsole 连接远程进程，可以在远程 Java 程序启动时加上下面这些参数:"}]},{"ID":"20240201213702-yrkhw0f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cHJvcGVydGllcw==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213702-yrkhw0f","updated":"20240201213702"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHJvcGVydGllcw==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"-Djava.rmi.server.hostname=外网访问 ip 地址\n-Dcom.sun.management.jmxremote.port=60001   //监控的端口号\n-Dcom.sun.management.jmxremote.authenticate=false   //关闭认证\n-Dcom.sun.management.jmxremote.ssl=false\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213703-k2pxyr6","Type":"NodeParagraph","Properties":{"id":"20240201213703-k2pxyr6","updated":"20240201213703"},"Children":[{"Type":"NodeText","Data":"在使用 JConsole 连接时，远程进程地址如下："}]},{"ID":"20240201213704-0kn0hvi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cGxhaW4=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213704-0kn0hvi","updated":"20240201213704"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW4=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"外网访问 ip 地址:60001\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213705-l6vtlol","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240201213705-l6vtlol","updated":"20240201213705"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"查看 Java 程序概况"}]},{"ID":"20240201213706-v84p5f4","Type":"NodeParagraph","Properties":{"id":"20240201213706-v84p5f4","updated":"20240201213706"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"查看 Java 程序概况 ","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/2查看Java程序概况-20240201213827-wa3w6zg.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213707-pmm5hi4","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240201213707-pmm5hi4","updated":"20240201213707"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"内存监控"}]},{"ID":"20240201213708-9vswli0","Type":"NodeParagraph","Properties":{"id":"20240201213708-9vswli0","updated":"20240201213708"},"Children":[{"Type":"NodeText","Data":"JConsole 可以显示当前内存的详细信息。不仅包括堆内存/非堆内存的整体信息，还可以细化到 eden 区、survivor 区等的使用情况，如下图所示。"}]},{"ID":"20240201213709-chan3dv","Type":"NodeParagraph","Properties":{"id":"20240201213709-chan3dv","updated":"20240201213709"},"Children":[{"Type":"NodeText","Data":"点击右边的“执行 GC(G)”按钮可以强制应用程序执行一个 Full GC。"}]},{"ID":"20240201213710-j8z9vmn","Type":"NodeBlockquote","Properties":{"id":"20240201213710-j8z9vmn","updated":"20240201213710"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20240201213711-uy2y2cq","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213711-uy2y2cq","updated":"20240201213711"},"Children":[{"ID":"20240201213712-bcb6gwb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213712-bcb6gwb","updated":"20240201213712"},"Children":[{"ID":"20240201213713-4v9mdu7","Type":"NodeParagraph","Properties":{"id":"20240201213713-4v9mdu7","updated":"20240201213713"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"新生代 GC（Minor GC）"},{"Type":"NodeText","Data":":指发生新生代的的垃圾收集动作，Minor GC 非常频繁，回收速度一般也比较快。"}]}]},{"ID":"20240201213714-g4ro1pv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213714-g4ro1pv","updated":"20240201213714"},"Children":[{"ID":"20240201213715-rgcup0q","Type":"NodeParagraph","Properties":{"id":"20240201213715-rgcup0q","updated":"20240201213715"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"老年代 GC（Major GC/Full GC）"},{"Type":"NodeText","Data":":指发生在老年代的 GC，出现了 Major GC 经常会伴随至少一次的 Minor GC（并非绝对），Major GC 的速度一般会比 Minor GC 的慢 10 倍以上。"}]}]}]}]},{"ID":"20240201213716-rye3bcz","Type":"NodeParagraph","Properties":{"id":"20240201213716-rye3bcz","updated":"20240201213716"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"内存监控 ","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/3内存监控-20240201213827-ha07iot.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213717-pjujep2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20240201213717-pjujep2","updated":"20240201213717"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"线程监控"}]},{"ID":"20240201213718-k4fl4n3","Type":"NodeParagraph","Properties":{"id":"20240201213718-k4fl4n3","updated":"20240201213718"},"Children":[{"Type":"NodeText","Data":"类似我们前面讲的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"jstack"},{"Type":"NodeText","Data":" 命令，不过这个是可视化的。"}]},{"ID":"20240201213719-jgysabj","Type":"NodeParagraph","Properties":{"id":"20240201213719-jgysabj","updated":"20240201213719"},"Children":[{"Type":"NodeText","Data":"最下面有一个\"检测死锁 (D)\"按钮，点击这个按钮可以自动为你找到发生死锁的线程以及它们的详细信息 。"}]},{"ID":"20240201213720-sd1oovd","Type":"NodeParagraph","Properties":{"id":"20240201213720-sd1oovd","updated":"20240201213720"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"线程监控 ","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/4线程监控-20240201213827-qbl542d.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213721-wmqq0ag","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213721-wmqq0ag","updated":"20240201213721"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Visual VM:多合一故障处理工具"}]},{"ID":"20240201213722-ueubqwp","Type":"NodeParagraph","Properties":{"id":"20240201213722-ueubqwp","updated":"20240201213722"},"Children":[{"Type":"NodeText","Data":"VisualVM 提供在 Java 虚拟机 (Java Virtual Machine, JVM) 上运行的 Java 应用程序的详细信息。在 VisualVM 的图形用户界面中，您可以方便、快捷地查看多个 Java 应用程序的相关信息。Visual VM 官网："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://visualvm.github.io/","TextMarkTextContent":"https://visualvm.github.io/"},{"Type":"NodeText","Data":" 。Visual VM 中文文档:"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://visualvm.github.io/documentation.html","TextMarkTextContent":"https://visualvm.github.io/documentation.html"},{"Type":"NodeText","Data":"。"}]},{"ID":"20240201213723-2ql656b","Type":"NodeParagraph","Properties":{"id":"20240201213723-2ql656b","updated":"20240201213723"},"Children":[{"Type":"NodeText","Data":"下面这段话摘自《深入理解 Java 虚拟机》。"}]},{"ID":"20240201213724-o3hzh0n","Type":"NodeBlockquote","Properties":{"id":"20240201213724-o3hzh0n","updated":"20240201213724"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20240201213725-lxnq2h1","Type":"NodeParagraph","Properties":{"id":"20240201213725-lxnq2h1","updated":"20240201213725"},"Children":[{"Type":"NodeText","Data":"VisualVM（All-in-One Java Troubleshooting Tool）是到目前为止随 JDK 发布的功能最强大的运行监视和故障处理程序，官方在 VisualVM 的软件说明中写上了“All-in-One”的描述字样，预示着他除了运行监视、故障处理外，还提供了很多其他方面的功能，如性能分析（Profiling）。VisualVM 的性能分析功能甚至比起 JProfiler、YourKit 等专业且收费的 Profiling 工具都不会逊色多少，而且 VisualVM 还有一个很大的优点：不需要被监视的程序基于特殊 Agent 运行，因此他对应用程序的实际性能的影响很小，使得他可以直接应用在生产环境中。这个优点是 JProfiler、YourKit 等工具无法与之媲美的。"}]}]},{"ID":"20240201213726-v3yorra","Type":"NodeParagraph","Properties":{"id":"20240201213726-v3yorra","updated":"20240201213726"},"Children":[{"Type":"NodeText","Data":"VisualVM 基于 NetBeans 平台开发，因此他一开始就具备了插件扩展功能的特性，通过插件扩展支持，VisualVM 可以做到："}]},{"ID":"20240201213727-6mnmnan","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213727-6mnmnan","updated":"20240201213727"},"Children":[{"ID":"20240201213728-qr3dijl","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213728-qr3dijl","updated":"20240201213728"},"Children":[{"ID":"20240201213729-tnvcqo5","Type":"NodeParagraph","Properties":{"id":"20240201213729-tnvcqo5","updated":"20240201213729"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"显示虚拟机进程以及进程的配置、环境信息（jps、jinfo）。"}]}]},{"ID":"20240201213730-8nj6vo2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213730-8nj6vo2","updated":"20240201213730"},"Children":[{"ID":"20240201213731-zqg9914","Type":"NodeParagraph","Properties":{"id":"20240201213731-zqg9914","updated":"20240201213731"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"监视应用程序的 CPU、GC、堆、方法区以及线程的信息（jstat、jstack）。"}]}]},{"ID":"20240201213732-73i6r7o","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213732-73i6r7o","updated":"20240201213732"},"Children":[{"ID":"20240201213733-in81byj","Type":"NodeParagraph","Properties":{"id":"20240201213733-in81byj","updated":"20240201213733"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"dump 以及分析堆转储快照（jmap、jhat）。"}]}]},{"ID":"20240201213734-l835nfa","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213734-l835nfa","updated":"20240201213734"},"Children":[{"ID":"20240201213735-oefgwej","Type":"NodeParagraph","Properties":{"id":"20240201213735-oefgwej","updated":"20240201213735"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"方法级的程序运行性能分析，找到被调用最多、运行时间最长的方法。"}]}]},{"ID":"20240201213736-w7jpc11","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213736-w7jpc11","updated":"20240201213736"},"Children":[{"ID":"20240201213737-jcxq0na","Type":"NodeParagraph","Properties":{"id":"20240201213737-jcxq0na","updated":"20240201213737"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"离线程序快照：收集程序的运行时配置、线程 dump、内存 dump 等信息建立一个快照，可以将快照发送开发者处进行 Bug 反馈。"}]}]},{"ID":"20240201213738-lhmjdxr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213738-lhmjdxr","updated":"20240201213738"},"Children":[{"ID":"20240201213739-j8zxx48","Type":"NodeParagraph","Properties":{"id":"20240201213739-j8zxx48","updated":"20240201213739"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"其他 plugins 的无限的可能性……"}]}]}]},{"ID":"20240201213740-gynf5u2","Type":"NodeParagraph","Properties":{"id":"20240201213740-gynf5u2","updated":"20240201213740"},"Children":[{"Type":"NodeText","Data":"这里就不具体介绍 VisualVM 的使用，如果想了解的话可以看:"}]},{"ID":"20240201213741-ee6bvf5","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213741-ee6bvf5","updated":"20240201213741"},"Children":[{"ID":"20240201213742-6v1tjma","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213742-6v1tjma","updated":"20240201213742"},"Children":[{"ID":"20240201213743-svi94xt","Type":"NodeParagraph","Properties":{"id":"20240201213743-svi94xt","updated":"20240201213743"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://visualvm.github.io/documentation.html","TextMarkTextContent":"https://visualvm.github.io/documentation.html"}]}]},{"ID":"20240201213744-qpl6480","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213744-qpl6480","updated":"20240201213744"},"Children":[{"ID":"20240201213745-yvgk37z","Type":"NodeParagraph","Properties":{"id":"20240201213745-yvgk37z","updated":"20240201213745"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://www.ibm.com/developerworks/cn/java/j-lo-visualvm/index.html","TextMarkTextContent":"https://www.ibm.com/developerworks/cn/java/j-lo-visualvm/index.html"}]}]}]},{"ID":"20240201213746-w42mm6b","Type":"NodeHTMLBlock","Data":"\u003cdiv\u003e\n\u003c!-- @include: @article-footer.snippet.md --\u003e\n\u003c/div\u003e","HtmlBlockType":2,"Properties":{"id":"20240201213746-w42mm6b","updated":"20240201213746"}}]}