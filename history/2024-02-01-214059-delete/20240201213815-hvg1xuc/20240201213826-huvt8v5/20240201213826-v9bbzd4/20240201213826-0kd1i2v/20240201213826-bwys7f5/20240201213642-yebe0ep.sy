{"ID":"20240201213642-yebe0ep","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240201213642-yebe0ep","title":"redis-data-structures-02","updated":"20240201213642"},"Children":[{"ID":"20240201213643-tcwjnf5","Type":"NodeThematicBreak","Properties":{"id":"20240201213643-tcwjnf5","updated":"20240201213643"}},{"ID":"20240201213644-zjsrx76","Type":"NodeParagraph","Properties":{"id":"20240201213644-zjsrx76","updated":"20240201213644"},"Children":[{"Type":"NodeText","Data":"title: Redis 3 种特殊数据类型详解"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"category: 数据库"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"tag:"}]},{"ID":"20240201213645-m0oj4v9","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213645-m0oj4v9","updated":"20240201213645"},"Children":[{"ID":"20240201213646-1ntkm0t","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213646-1ntkm0t","updated":"20240201213646"},"Children":[{"ID":"20240201213647-fjr4gu6","Type":"NodeParagraph","Properties":{"id":"20240201213647-fjr4gu6","updated":"20240201213647"},"Children":[{"Type":"NodeText","Data":"Redis"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"head:"}]}]},{"ID":"20240201213648-k7m72w2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213648-k7m72w2","updated":"20240201213648"},"Children":[{"ID":"20240201213649-f5s7ttw","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213649-f5s7ttw","updated":"20240201213649"},"Children":[{"ID":"20240201213650-yak0izo","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213650-yak0izo","updated":"20240201213650"},"Children":[{"ID":"20240201213651-9gw7s0q","Type":"NodeParagraph","Properties":{"id":"20240201213651-9gw7s0q","updated":"20240201213651"},"Children":[{"Type":"NodeText","Data":"meta"}]}]},{"ID":"20240201213652-5jmzd5p","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213652-5jmzd5p","updated":"20240201213652"},"Children":[{"ID":"20240201213653-kgn9ggv","Type":"NodeParagraph","Properties":{"id":"20240201213653-kgn9ggv","updated":"20240201213653"},"Children":[{"Type":"NodeText","Data":"name: keywords"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"content: Redis常见数据类型"}]}]}]}]},{"ID":"20240201213654-68yz5kp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213654-68yz5kp","updated":"20240201213654"},"Children":[{"ID":"20240201213655-4txlkqb","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213655-4txlkqb","updated":"20240201213655"},"Children":[{"ID":"20240201213656-i6914vy","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213656-i6914vy","updated":"20240201213656"},"Children":[{"ID":"20240201213657-2ti2dno","Type":"NodeParagraph","Properties":{"id":"20240201213657-2ti2dno","updated":"20240201213657"},"Children":[{"Type":"NodeText","Data":"meta"}]}]},{"ID":"20240201213658-5b8lw7r","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213658-5b8lw7r","updated":"20240201213658"},"Children":[{"ID":"20240201213659-f7fisx0","Type":"NodeParagraph","Properties":{"id":"20240201213659-f7fisx0","updated":"20240201213659"},"Children":[{"Type":"NodeText","Data":"name: description"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"content: Redis特殊数据类型总结：HyperLogLogs（基数统计）、Bitmap （位存储）、Geospatial (地理位置)。"}]}]}]}]}]},{"ID":"20240201213660-pwxyi6q","Type":"NodeThematicBreak","Properties":{"id":"20240201213660-pwxyi6q","updated":"20240201213660"}},{"ID":"20240201213661-ub4fgm5","Type":"NodeParagraph","Properties":{"id":"20240201213661-ub4fgm5","updated":"20240201213661"},"Children":[{"Type":"NodeText","Data":"除了 5 种基本的数据类型之外，Redis 还支持 3 种特殊的数据类型：Bitmap、HyperLogLog、GEO。"}]},{"ID":"20240201213662-u6ynynt","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213662-u6ynynt","updated":"20240201213662"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Bitmap （位图）"}]},{"ID":"20240201213663-2sckchj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213663-2sckchj","updated":"20240201213663"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"介绍"}]},{"ID":"20240201213664-0k6hfrj","Type":"NodeParagraph","Properties":{"id":"20240201213664-0k6hfrj","updated":"20240201213664"},"Children":[{"Type":"NodeText","Data":"根据官网介绍："}]},{"ID":"20240201213665-xxd7ufy","Type":"NodeBlockquote","Properties":{"id":"20240201213665-xxd7ufy","updated":"20240201213665"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20240201213666-v0qj8nj","Type":"NodeParagraph","Properties":{"id":"20240201213666-v0qj8nj","updated":"20240201213666"},"Children":[{"Type":"NodeText","Data":"Bitmaps are not an actual data type, but a set of bit-oriented operations defined on the String type which is treated like a bit vector. Since strings are binary safe blobs and their maximum length is 512 MB, they are suitable to set up to 2^32 different bits."}]},{"ID":"20240201213667-3jxhvxk","Type":"NodeParagraph","Properties":{"id":"20240201213667-3jxhvxk","updated":"20240201213667"},"Children":[{"Type":"NodeText","Data":"Bitmap 不是 Redis 中的实际数据类型，而是在 String 类型上定义的一组面向位的操作，将其视为位向量。由于字符串是二进制安全的块，且最大长度为 512 MB，它们适合用于设置最多 2^32 个不同的位。"}]}]},{"ID":"20240201213668-0o3j4lw","Type":"NodeParagraph","Properties":{"id":"20240201213668-0o3j4lw","updated":"20240201213668"},"Children":[{"Type":"NodeText","Data":"Bitmap 存储的是连续的二进制数字（0 和 1），通过 Bitmap, 只需要一个 bit 位来表示某个元素对应的值或者状态，key 就是对应元素本身 。我们知道 8 个 bit 可以组成一个 byte，所以 Bitmap 本身会极大的节省储存空间。"}]},{"ID":"20240201213669-wk4jtve","Type":"NodeParagraph","Properties":{"id":"20240201213669-wk4jtve","updated":"20240201213669"},"Children":[{"Type":"NodeText","Data":"你可以将 Bitmap 看作是一个存储二进制数字（0 和 1）的数组，数组中每个元素的下标叫做 offset（偏移量）。"}]},{"ID":"20240201213670-j67p0vn","Type":"NodeParagraph","Properties":{"id":"20240201213670-j67p0vn","updated":"20240201213670"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://oss.javaguide.cn/github/javaguide/database/redis/image-20220720194154133.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213671-ksfy77g","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213671-ksfy77g","updated":"20240201213671"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"常用命令"}]},{"ID":"20240201213672-bq2v8ye","Type":"NodeTable","Data":"| 命令                                  | 介绍                                                             |\n| ------------------------------------- | ---------------------------------------------------------------- |\n| SETBIT key offset value               | 设置指定 offset 位置的值                                         |\n| GETBIT key offset                     | 获取指定 offset 位置的值                                         |\n| BITCOUNT key start end                | 获取 start 和 end 之前值为 1 的元素个数                          |\n| BITOP operation destkey key1 key2 ... | 对一个或多个 Bitmap 进行运算，可用运算符有 AND, OR, XOR 以及 NOT |","TableAligns":[0,0],"Properties":{"id":"20240201213672-bq2v8ye","updated":"20240201213672"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"命令"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"介绍"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"SETBIT key offset value"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"设置指定 offset 位置的值"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GETBIT key offset"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"获取指定 offset 位置的值"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"BITCOUNT key start end"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"获取 start 和 end 之前值为 1 的元素个数"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"BITOP operation destkey key1 key2 ..."}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"对一个或多个 Bitmap 进行运算，可用运算符有 AND, OR, XOR 以及 NOT"}]}]}]},{"ID":"20240201213673-jwehx09","Type":"NodeParagraph","Properties":{"id":"20240201213673-jwehx09","updated":"20240201213673"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Bitmap 基本操作演示"},{"Type":"NodeText","Data":"："}]},{"ID":"20240201213674-372cr9a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213674-372cr9a","updated":"20240201213674"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# SETBIT 会返回之前位的值（默认是 0）这里会生成 7 个位\n\u003e SETBIT mykey 7 1\n(integer) 0\n\u003e SETBIT mykey 7 0\n(integer) 1\n\u003e GETBIT mykey 7\n(integer) 0\n\u003e SETBIT mykey 6 1\n(integer) 0\n\u003e SETBIT mykey 8 1\n(integer) 0\n# 通过 bitcount 统计被被设置为 1 的位的数量。\n\u003e BITCOUNT mykey\n(integer) 2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213675-3mw3k6n","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213675-3mw3k6n","updated":"20240201213675"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"应用场景"}]},{"ID":"20240201213676-x3d7p3u","Type":"NodeParagraph","Properties":{"id":"20240201213676-x3d7p3u","updated":"20240201213676"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"需要保存状态信息（0/1 即可表示）的场景"}]},{"ID":"20240201213677-nwzbaoc","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213677-nwzbaoc","updated":"20240201213677"},"Children":[{"ID":"20240201213678-yng9jbr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213678-yng9jbr","updated":"20240201213678"},"Children":[{"ID":"20240201213679-5tsh3l2","Type":"NodeParagraph","Properties":{"id":"20240201213679-5tsh3l2","updated":"20240201213679"},"Children":[{"Type":"NodeText","Data":"举例：用户签到情况、活跃用户情况、用户行为统计（比如是否点赞过某个视频）。"}]}]},{"ID":"20240201213680-crwy3zq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213680-crwy3zq","updated":"20240201213680"},"Children":[{"ID":"20240201213681-0yda4kg","Type":"NodeParagraph","Properties":{"id":"20240201213681-0yda4kg","updated":"20240201213681"},"Children":[{"Type":"NodeText","Data":"相关命令："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"SETBIT"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GETBIT"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BITCOUNT"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BITOP"},{"Type":"NodeText","Data":"。"}]}]}]},{"ID":"20240201213682-bxhfozf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213682-bxhfozf","updated":"20240201213682"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"HyperLogLog（基数统计）"}]},{"ID":"20240201213683-s4nr54x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213683-s4nr54x","updated":"20240201213683"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"介绍"}]},{"ID":"20240201213684-v6te2ia","Type":"NodeParagraph","Properties":{"id":"20240201213684-v6te2ia","updated":"20240201213684"},"Children":[{"Type":"NodeText","Data":"HyperLogLog 是一种有名的基数计数概率算法 ，基于 LogLog Counting(LLC)优化改进得来，并不是 Redis 特有的，Redis 只是实现了这个算法并提供了一些开箱即用的 API。"}]},{"ID":"20240201213685-w8d0nh1","Type":"NodeParagraph","Properties":{"id":"20240201213685-w8d0nh1","updated":"20240201213685"},"Children":[{"Type":"NodeText","Data":"Redis 提供的 HyperLogLog 占用空间非常非常小，只需要 12k 的空间就能存储接近"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"2^64"},{"Type":"NodeText","Data":"个不同元素。这是真的厉害，这就是数学的魅力么！并且，Redis 对 HyperLogLog 的存储结构做了优化，采用两种方式计数："}]},{"ID":"20240201213686-re4p5jg","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213686-re4p5jg","updated":"20240201213686"},"Children":[{"ID":"20240201213687-0iydrhh","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213687-0iydrhh","updated":"20240201213687"},"Children":[{"ID":"20240201213688-zht2qjm","Type":"NodeParagraph","Properties":{"id":"20240201213688-zht2qjm","updated":"20240201213688"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"稀疏矩阵"},{"Type":"NodeText","Data":"：计数较少的时候，占用空间很小。"}]}]},{"ID":"20240201213689-dha8fy2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213689-dha8fy2","updated":"20240201213689"},"Children":[{"ID":"20240201213690-auh3ypm","Type":"NodeParagraph","Properties":{"id":"20240201213690-auh3ypm","updated":"20240201213690"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"稠密矩阵"},{"Type":"NodeText","Data":"：计数达到某个阈值的时候，占用 12k 的空间。"}]}]}]},{"ID":"20240201213691-5pjha2e","Type":"NodeParagraph","Properties":{"id":"20240201213691-5pjha2e","updated":"20240201213691"},"Children":[{"Type":"NodeText","Data":"Redis 官方文档中有对应的详细说明："}]},{"ID":"20240201213692-dq9six3","Type":"NodeParagraph","Properties":{"id":"20240201213692-dq9six3","updated":"20240201213692"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://oss.javaguide.cn/github/javaguide/database/redis/image-20220721091424563.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213693-lg7w2y4","Type":"NodeParagraph","Properties":{"id":"20240201213693-lg7w2y4","updated":"20240201213693"},"Children":[{"Type":"NodeText","Data":"基数计数概率算法为了节省内存并不会直接存储元数据，而是通过一定的概率统计方法预估基数值（集合中包含元素的个数）。因此， HyperLogLog 的计数结果并不是一个精确值，存在一定的误差（标准误差为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"0.81%"},{"Type":"NodeText","Data":" ）。"}]},{"ID":"20240201213694-1zvt8to","Type":"NodeParagraph","Properties":{"id":"20240201213694-1zvt8to","updated":"20240201213694"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://oss.javaguide.cn/github/javaguide/database/redis/image-20220720194154133.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213695-p94cjul","Type":"NodeParagraph","Properties":{"id":"20240201213695-p94cjul","updated":"20240201213695"},"Children":[{"Type":"NodeText","Data":"HyperLogLog 的使用非常简单，但原理非常复杂。HyperLogLog 的原理以及在 Redis 中的实现可以看这篇文章："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/6844903785744056333","TextMarkTextContent":"HyperLogLog 算法的原理讲解以及 Redis 是如何应用它的"},{"Type":"NodeText","Data":" 。"}]},{"ID":"20240201213696-w6t2u3d","Type":"NodeParagraph","Properties":{"id":"20240201213696-w6t2u3d","updated":"20240201213696"},"Children":[{"Type":"NodeText","Data":"再推荐一个可以帮助理解 HyperLogLog 原理的工具："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"http://content.research.neustar.biz/blog/hll.html","TextMarkTextContent":"Sketch of the Day: HyperLogLog — Cornerstone of a Big Data Infrastructure"},{"Type":"NodeText","Data":" 。"}]},{"ID":"20240201213697-glxkswx","Type":"NodeParagraph","Properties":{"id":"20240201213697-glxkswx","updated":"20240201213697"},"Children":[{"Type":"NodeText","Data":"除了 HyperLogLog 之外，Redis 还提供了其他的概率数据结构，对应的官方文档地址："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://redis.io/docs/data-types/probabilistic/","TextMarkTextContent":"https://redis.io/docs/data-types/probabilistic/"},{"Type":"NodeText","Data":" 。"}]},{"ID":"20240201213698-7ek66tf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213698-7ek66tf","updated":"20240201213698"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"常用命令"}]},{"ID":"20240201213699-fpob2z8","Type":"NodeParagraph","Properties":{"id":"20240201213699-fpob2z8","updated":"20240201213699"},"Children":[{"Type":"NodeText","Data":"HyperLogLog 相关的命令非常少，最常用的也就 3 个。"}]},{"ID":"20240201213700-dmcbtht","Type":"NodeTable","Data":"| 命令                                      | 介绍                                                                             |\n| ----------------------------------------- | -------------------------------------------------------------------------------- |\n| PFADD key element1 element2 ...           | 添加一个或多个元素到 HyperLogLog 中                                              |\n| PFCOUNT key1 key2                         | 获取一个或者多个 HyperLogLog 的唯一计数。                                        |\n| PFMERGE destkey sourcekey1 sourcekey2 ... | 将多个 HyperLogLog 合并到 destkey 中，destkey 会结合多个源，算出对应的唯一计数。 |","TableAligns":[0,0],"Properties":{"id":"20240201213700-dmcbtht","updated":"20240201213700"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"命令"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"介绍"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"PFADD key element1 element2 ..."}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"添加一个或多个元素到 HyperLogLog 中"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"PFCOUNT key1 key2"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"获取一个或者多个 HyperLogLog 的唯一计数。"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"PFMERGE destkey sourcekey1 sourcekey2 ..."}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"将多个 HyperLogLog 合并到 destkey 中，destkey 会结合多个源，算出对应的唯一计数。"}]}]}]},{"ID":"20240201213701-49mw5ze","Type":"NodeParagraph","Properties":{"id":"20240201213701-49mw5ze","updated":"20240201213701"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"HyperLogLog 基本操作演示"},{"Type":"NodeText","Data":"："}]},{"ID":"20240201213702-nxg11nq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213702-nxg11nq","updated":"20240201213702"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003e PFADD hll foo bar zap\n(integer) 1\n\u003e PFADD hll zap zap zap\n(integer) 0\n\u003e PFADD hll foo bar\n(integer) 0\n\u003e PFCOUNT hll\n(integer) 3\n\u003e PFADD some-other-hll 1 2 3\n(integer) 1\n\u003e PFCOUNT hll some-other-hll\n(integer) 6\n\u003e PFMERGE desthll hll some-other-hll\n\"OK\"\n\u003e PFCOUNT desthll\n(integer) 6\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213703-4ap2xmh","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213703-4ap2xmh","updated":"20240201213703"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"应用场景"}]},{"ID":"20240201213704-etcuip3","Type":"NodeParagraph","Properties":{"id":"20240201213704-etcuip3","updated":"20240201213704"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"数量量巨大（百万、千万级别以上）的计数场景"}]},{"ID":"20240201213705-vned5lu","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213705-vned5lu","updated":"20240201213705"},"Children":[{"ID":"20240201213706-gez70wf","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213706-gez70wf","updated":"20240201213706"},"Children":[{"ID":"20240201213707-d32aiw9","Type":"NodeParagraph","Properties":{"id":"20240201213707-d32aiw9","updated":"20240201213707"},"Children":[{"Type":"NodeText","Data":"举例：热门网站每日/每周/每月访问 ip 数统计、热门帖子 uv 统计、"}]}]},{"ID":"20240201213708-mjfhg74","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213708-mjfhg74","updated":"20240201213708"},"Children":[{"ID":"20240201213709-lgin0wu","Type":"NodeParagraph","Properties":{"id":"20240201213709-lgin0wu","updated":"20240201213709"},"Children":[{"Type":"NodeText","Data":"相关命令："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PFADD"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PFCOUNT"},{"Type":"NodeText","Data":" 。"}]}]}]},{"ID":"20240201213710-c90tyd0","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213710-c90tyd0","updated":"20240201213710"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Geospatial (地理位置)"}]},{"ID":"20240201213711-a2r2em9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213711-a2r2em9","updated":"20240201213711"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"介绍"}]},{"ID":"20240201213712-ym72lr4","Type":"NodeParagraph","Properties":{"id":"20240201213712-ym72lr4","updated":"20240201213712"},"Children":[{"Type":"NodeText","Data":"Geospatial index（地理空间索引，简称 GEO） 主要用于存储地理位置信息，基于 Sorted Set 实现。"}]},{"ID":"20240201213713-ckzlkdw","Type":"NodeParagraph","Properties":{"id":"20240201213713-ckzlkdw","updated":"20240201213713"},"Children":[{"Type":"NodeText","Data":"通过 GEO 我们可以轻松实现两个位置距离的计算、获取指定位置附近的元素等功能。"}]},{"ID":"20240201213714-sdndo4g","Type":"NodeParagraph","Properties":{"id":"20240201213714-sdndo4g","updated":"20240201213714"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://oss.javaguide.cn/github/javaguide/database/redis/image-20220720194359494.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213715-mfyoamh","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213715-mfyoamh","updated":"20240201213715"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"常用命令"}]},{"ID":"20240201213716-v75v1yd","Type":"NodeTable","Data":"| 命令                                             | 介绍                                                                                                 |\n| ------------------------------------------------ | ---------------------------------------------------------------------------------------------------- |\n| GEOADD key longitude1 latitude1 member1 ...      | 添加一个或多个元素对应的经纬度信息到 GEO 中                                                          |\n| GEOPOS key member1 member2 ...                   | 返回给定元素的经纬度信息                                                                             |\n| GEODIST key member1 member2 M/KM/FT/MI           | 返回两个给定元素之间的距离                                                                           |\n| GEORADIUS key longitude latitude radius distance | 获取指定位置附近 distance 范围内的其他元素，支持 ASC(由近到远)、DESC（由远到近）、Count(数量) 等参数 |\n| GEORADIUSBYMEMBER key member radius distance     | 类似于 GEORADIUS 命令，只是参照的中心点是 GEO 中的元素                                               |","TableAligns":[0,0],"Properties":{"id":"20240201213716-v75v1yd","updated":"20240201213716"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"命令"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"介绍"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GEOADD key longitude1 latitude1 member1 ..."}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"添加一个或多个元素对应的经纬度信息到 GEO 中"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GEOPOS key member1 member2 ..."}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"返回给定元素的经纬度信息"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GEODIST key member1 member2 M/KM/FT/MI"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"返回两个给定元素之间的距离"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GEORADIUS key longitude latitude radius distance"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"获取指定位置附近 distance 范围内的其他元素，支持 ASC(由近到远)、DESC（由远到近）、Count(数量) 等参数"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GEORADIUSBYMEMBER key member radius distance"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"类似于 GEORADIUS 命令，只是参照的中心点是 GEO 中的元素"}]}]}]},{"ID":"20240201213717-1v4edbl","Type":"NodeParagraph","Properties":{"id":"20240201213717-1v4edbl","updated":"20240201213717"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"基本操作"},{"Type":"NodeText","Data":"："}]},{"ID":"20240201213718-akigb9d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213718-akigb9d","updated":"20240201213718"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003e GEOADD personLocation 116.33 39.89 user1 116.34 39.90 user2 116.35 39.88 user3\n3\n\u003e GEOPOS personLocation user1\n116.3299986720085144\n39.89000061669732844\n\u003e GEODIST personLocation user1 user2 km\n1.4018\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213719-r9a3wmh","Type":"NodeParagraph","Properties":{"id":"20240201213719-r9a3wmh","updated":"20240201213719"},"Children":[{"Type":"NodeText","Data":"通过 Redis 可视化工具查看 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"personLocation"},{"Type":"NodeText","Data":" ，果不其然，底层就是 Sorted Set。"}]},{"ID":"20240201213720-7l5n5dz","Type":"NodeParagraph","Properties":{"id":"20240201213720-7l5n5dz","updated":"20240201213720"},"Children":[{"Type":"NodeText","Data":"GEO 中存储的地理位置信息的经纬度数据通过 GeoHash 算法转换成了一个整数，这个整数作为 Sorted Set 的 score(权重参数)使用。"}]},{"ID":"20240201213721-dguxsf2","Type":"NodeParagraph","Properties":{"id":"20240201213721-dguxsf2","updated":"20240201213721"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://oss.javaguide.cn/github/javaguide/database/redis/image-20220721201545147.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20240201213722-8tt5wpl","Type":"NodeParagraph","Properties":{"id":"20240201213722-8tt5wpl","updated":"20240201213722"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"获取指定位置范围内的其他元素"},{"Type":"NodeText","Data":"："}]},{"ID":"20240201213723-ex4vuj0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213723-ex4vuj0","updated":"20240201213723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003e GEORADIUS personLocation 116.33 39.87 3 km\nuser3\nuser1\n\u003e GEORADIUS personLocation 116.33 39.87 2 km\n\u003e GEORADIUS personLocation 116.33 39.87 5 km\nuser3\nuser1\nuser2\n\u003e GEORADIUSBYMEMBER personLocation user1 5 km\nuser3\nuser1\nuser2\n\u003e GEORADIUSBYMEMBER personLocation user1 2 km\nuser1\nuser2\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213724-dft1d3u","Type":"NodeParagraph","Properties":{"id":"20240201213724-dft1d3u","updated":"20240201213724"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GEORADIUS"},{"Type":"NodeText","Data":" 命令的底层原理解析可以看看阿里的这篇文章："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/6844903966061363207","TextMarkTextContent":"Redis 到底是怎么实现“附近的人”这个功能的呢？"},{"Type":"NodeText","Data":" 。"}]},{"ID":"20240201213725-18tb1z6","Type":"NodeParagraph","Properties":{"id":"20240201213725-18tb1z6","updated":"20240201213725"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"移除元素"},{"Type":"NodeText","Data":"："}]},{"ID":"20240201213726-xfysyq8","Type":"NodeParagraph","Properties":{"id":"20240201213726-xfysyq8","updated":"20240201213726"},"Children":[{"Type":"NodeText","Data":"GEO 底层是 Sorted Set ，你可以对 GEO 使用 Sorted Set 相关的命令。"}]},{"ID":"20240201213727-t16zw8j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213727-t16zw8j","updated":"20240201213727"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003e ZREM personLocation user1\n1\n\u003e ZRANGE personLocation 0 -1\nuser3\nuser2\n\u003e ZSCORE personLocation user2\n4069879562983946\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213728-e3c6p36","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213728-e3c6p36","updated":"20240201213728"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"应用场景"}]},{"ID":"20240201213729-cyo8t8p","Type":"NodeParagraph","Properties":{"id":"20240201213729-cyo8t8p","updated":"20240201213729"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"需要管理使用地理空间数据的场景"}]},{"ID":"20240201213730-ryd35ro","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213730-ryd35ro","updated":"20240201213730"},"Children":[{"ID":"20240201213731-w8x6eq9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213731-w8x6eq9","updated":"20240201213731"},"Children":[{"ID":"20240201213732-z52xi6i","Type":"NodeParagraph","Properties":{"id":"20240201213732-z52xi6i","updated":"20240201213732"},"Children":[{"Type":"NodeText","Data":"举例：附近的人。"}]}]},{"ID":"20240201213733-k9o08yy","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213733-k9o08yy","updated":"20240201213733"},"Children":[{"ID":"20240201213734-m3bxgky","Type":"NodeParagraph","Properties":{"id":"20240201213734-m3bxgky","updated":"20240201213734"},"Children":[{"Type":"NodeText","Data":"相关命令: "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GEOADD"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GEORADIUS"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GEORADIUSBYMEMBER"},{"Type":"NodeText","Data":" 。"}]}]}]},{"ID":"20240201213735-8j2p3o9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213735-8j2p3o9","updated":"20240201213735"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"总结"}]},{"ID":"20240201213736-eyhkf1y","Type":"NodeTable","Data":"| 数据类型         | 说明                                                                                                                                                                                                                                                                  |\n| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Bitmap           | 你可以将 Bitmap 看作是一个存储二进制数字（0 和 1）的数组，数组中每个元素的下标叫做 offset（偏移量）。通过 Bitmap, 只需要一个 bit 位来表示某个元素对应的值或者状态，key 就是对应元素本身 。我们知道 8 个 bit 可以组成一个 byte，所以 Bitmap 本身会极大的节省储存空间。 |\n| HyperLogLog      | Redis 提供的 HyperLogLog 占用空间非常非常小，只需要 12k 的空间就能存储接近`2^64`个不同元素。不过，HyperLogLog 的计数结果并不是一个精确值，存在一定的误差（标准误差为 `0.81%` ）。                                                                                     |\n| Geospatial index | Geospatial index（地理空间索引，简称 GEO） 主要用于存储地理位置信息，基于 Sorted Set 实现。                                                                                                                                                                           |","TableAligns":[0,0],"Properties":{"id":"20240201213736-eyhkf1y","updated":"20240201213736"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"数据类型"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Bitmap"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"你可以将 Bitmap 看作是一个存储二进制数字（0 和 1）的数组，数组中每个元素的下标叫做 offset（偏移量）。通过 Bitmap, 只需要一个 bit 位来表示某个元素对应的值或者状态，key 就是对应元素本身 。我们知道 8 个 bit 可以组成一个 byte，所以 Bitmap 本身会极大的节省储存空间。"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"HyperLogLog"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Redis 提供的 HyperLogLog 占用空间非常非常小，只需要 12k 的空间就能存储接近"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"2^64"},{"Type":"NodeText","Data":"个不同元素。不过，HyperLogLog 的计数结果并不是一个精确值，存在一定的误差（标准误差为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"0.81%"},{"Type":"NodeText","Data":" ）。"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Geospatial index"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Geospatial index（地理空间索引，简称 GEO） 主要用于存储地理位置信息，基于 Sorted Set 实现。"}]}]}]},{"ID":"20240201213737-i5tbl9m","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213737-i5tbl9m","updated":"20240201213737"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"参考"}]},{"ID":"20240201213738-1n71juy","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213738-1n71juy","updated":"20240201213738"},"Children":[{"ID":"20240201213739-qbfmp7z","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213739-qbfmp7z","updated":"20240201213739"},"Children":[{"ID":"20240201213740-h89iqbd","Type":"NodeParagraph","Properties":{"id":"20240201213740-h89iqbd","updated":"20240201213740"},"Children":[{"Type":"NodeText","Data":"Redis Data Structures："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://redis.com/redis-enterprise/data-structures/","TextMarkTextContent":"https://redis.com/redis-enterprise/data-structures/"},{"Type":"NodeText","Data":" 。"}]}]},{"ID":"20240201213741-snrchyq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213741-snrchyq","updated":"20240201213741"},"Children":[{"ID":"20240201213742-72gyfuu","Type":"NodeParagraph","Properties":{"id":"20240201213742-72gyfuu","updated":"20240201213742"},"Children":[{"Type":"NodeText","Data":"《Redis 深度历险：核心原理与应用实践》1.6 四两拨千斤——HyperLogLog"}]}]},{"ID":"20240201213743-e1mw7y2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213743-e1mw7y2","updated":"20240201213743"},"Children":[{"ID":"20240201213744-jvhqzgw","Type":"NodeParagraph","Properties":{"id":"20240201213744-jvhqzgw","updated":"20240201213744"},"Children":[{"Type":"NodeText","Data":"布隆过滤器,位图,HyperLogLog："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://hogwartsrico.github.io/2020/06/08/BloomFilter-HyperLogLog-BitMap/index.html","TextMarkTextContent":"https://hogwartsrico.github.io/2020/06/08/BloomFilter-HyperLogLog-BitMap/index.html"}]}]}]},{"ID":"20240201213745-fp1ki1t","Type":"NodeHTMLBlock","Data":"\u003cdiv\u003e\n\u003c!-- @include: @article-footer.snippet.md --\u003e\n\u003c/div\u003e","HtmlBlockType":2,"Properties":{"id":"20240201213745-fp1ki1t","updated":"20240201213745"}}]}