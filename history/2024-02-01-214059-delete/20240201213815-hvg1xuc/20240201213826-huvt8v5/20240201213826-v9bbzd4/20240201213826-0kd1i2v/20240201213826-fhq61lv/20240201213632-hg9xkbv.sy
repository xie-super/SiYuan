{"ID":"20240201213632-hg9xkbv","Spec":"1","Type":"NodeDocument","Properties":{"id":"20240201213632-hg9xkbv","title":"mysql-query-execution-plan","updated":"20240201213632"},"Children":[{"ID":"20240201213633-vyhwjxt","Type":"NodeThematicBreak","Properties":{"id":"20240201213633-vyhwjxt","updated":"20240201213633"}},{"ID":"20240201213634-m9lw3bw","Type":"NodeParagraph","Properties":{"id":"20240201213634-m9lw3bw","updated":"20240201213634"},"Children":[{"Type":"NodeText","Data":"title: MySQL执行计划分析"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"category: 数据库"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"tag:"}]},{"ID":"20240201213635-8026ia4","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213635-8026ia4","updated":"20240201213635"},"Children":[{"ID":"20240201213636-y6pce89","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213636-y6pce89","updated":"20240201213636"},"Children":[{"ID":"20240201213637-d2h2zi1","Type":"NodeParagraph","Properties":{"id":"20240201213637-d2h2zi1","updated":"20240201213637"},"Children":[{"Type":"NodeText","Data":"MySQL"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"head:"}]}]},{"ID":"20240201213638-atzcc96","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213638-atzcc96","updated":"20240201213638"},"Children":[{"ID":"20240201213639-cjhmz0p","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213639-cjhmz0p","updated":"20240201213639"},"Children":[{"ID":"20240201213640-i6tygs7","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213640-i6tygs7","updated":"20240201213640"},"Children":[{"ID":"20240201213641-vvaactz","Type":"NodeParagraph","Properties":{"id":"20240201213641-vvaactz","updated":"20240201213641"},"Children":[{"Type":"NodeText","Data":"meta"}]}]},{"ID":"20240201213642-lr1fbu9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213642-lr1fbu9","updated":"20240201213642"},"Children":[{"ID":"20240201213643-vrawnov","Type":"NodeParagraph","Properties":{"id":"20240201213643-vrawnov","updated":"20240201213643"},"Children":[{"Type":"NodeText","Data":"name: keywords"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"content: MySQL基础,MySQL执行计划,EXPLAIN,查询优化器"}]}]}]}]},{"ID":"20240201213644-6o6qytc","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"MarkerOffset":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213644-6o6qytc","updated":"20240201213644"},"Children":[{"ID":"20240201213645-b1dh639","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213645-b1dh639","updated":"20240201213645"},"Children":[{"ID":"20240201213646-jcyho0l","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213646-jcyho0l","updated":"20240201213646"},"Children":[{"ID":"20240201213647-oyi1jnf","Type":"NodeParagraph","Properties":{"id":"20240201213647-oyi1jnf","updated":"20240201213647"},"Children":[{"Type":"NodeText","Data":"meta"}]}]},{"ID":"20240201213648-kldc1kb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213648-kldc1kb","updated":"20240201213648"},"Children":[{"ID":"20240201213649-8eesyrx","Type":"NodeParagraph","Properties":{"id":"20240201213649-8eesyrx","updated":"20240201213649"},"Children":[{"Type":"NodeText","Data":"name: description"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"content: 执行计划是指一条 SQL 语句在经过MySQL 查询优化器的优化会后，具体的执行方式。优化 SQL 的第一步应该是读懂 SQL 的执行计划。"}]}]}]}]}]},{"ID":"20240201213650-1o070sk","Type":"NodeThematicBreak","Properties":{"id":"20240201213650-1o070sk","updated":"20240201213650"}},{"ID":"20240201213651-89ikua2","Type":"NodeBlockquote","Properties":{"id":"20240201213651-89ikua2","updated":"20240201213651"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20240201213652-4z8d34s","Type":"NodeParagraph","Properties":{"id":"20240201213652-4z8d34s","updated":"20240201213652"},"Children":[{"Type":"NodeText","Data":"本文来自公号 MySQL 技术，JavaGuide 对其做了补充完善。原文地址："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://mp.weixin.qq.com/s/d5OowNLtXBGEAbT31sSH4g","TextMarkTextContent":"https://mp.weixin.qq.com/s/d5OowNLtXBGEAbT31sSH4g"}]}]},{"ID":"20240201213653-h83nt4c","Type":"NodeParagraph","Properties":{"id":"20240201213653-h83nt4c","updated":"20240201213653"},"Children":[{"Type":"NodeText","Data":"优化 SQL 的第一步应该是读懂 SQL 的执行计划。本篇文章，我们一起来学习下 MySQL "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 执行计划相关知识。"}]},{"ID":"20240201213654-civ6mdd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213654-civ6mdd","updated":"20240201213654"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"什么是执行计划？"}]},{"ID":"20240201213655-t7edr9r","Type":"NodeParagraph","Properties":{"id":"20240201213655-t7edr9r","updated":"20240201213655"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"执行计划"},{"Type":"NodeText","Data":" 是指一条 SQL 语句在经过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"MySQL 查询优化器"},{"Type":"NodeText","Data":" 的优化会后，具体的执行方式。"}]},{"ID":"20240201213656-9fn3y3y","Type":"NodeParagraph","Properties":{"id":"20240201213656-9fn3y3y","updated":"20240201213656"},"Children":[{"Type":"NodeText","Data":"执行计划通常用于 SQL 性能分析、优化等场景。通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 的结果，可以了解到如数据表的查询顺序、数据查询操作的操作类型、哪些索引可以被命中、哪些索引实际会命中、每个数据表有多少行记录被查询等信息。"}]},{"ID":"20240201213657-0tcji7d","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213657-0tcji7d","updated":"20240201213657"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"如何获取执行计划？"}]},{"ID":"20240201213658-uaqm7sv","Type":"NodeParagraph","Properties":{"id":"20240201213658-uaqm7sv","updated":"20240201213658"},"Children":[{"Type":"NodeText","Data":"MySQL 为我们提供了 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 命令，来获取执行计划的相关信息。"}]},{"ID":"20240201213659-qxs0ab4","Type":"NodeParagraph","Properties":{"id":"20240201213659-qxs0ab4","updated":"20240201213659"},"Children":[{"Type":"NodeText","Data":"需要注意的是，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 语句并不会真的去执行相关的语句，而是通过查询优化器对语句进行分析，找出最优的查询方案，并显示对应的信息。"}]},{"ID":"20240201213660-mddiytv","Type":"NodeParagraph","Properties":{"id":"20240201213660-mddiytv","updated":"20240201213660"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 执行计划支持 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"SELECT"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"DELETE"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"INSERT"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"REPLACE"},{"Type":"NodeText","Data":" 以及 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UPDATE"},{"Type":"NodeText","Data":" 语句。我们一般多用于分析 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"SELECT"},{"Type":"NodeText","Data":" 查询语句，使用起来非常简单，语法如下："}]},{"ID":"20240201213661-5tbj03p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c3Fs","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213661-5tbj03p","updated":"20240201213661"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c3Fs","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"EXPLAIN + SELECT 查询语句；\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213662-ubzxmdx","Type":"NodeParagraph","Properties":{"id":"20240201213662-ubzxmdx","updated":"20240201213662"},"Children":[{"Type":"NodeText","Data":"我们简单来看下一条查询语句的执行计划："}]},{"ID":"20240201213663-p0kdqnr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c3Fs","CodeBlockCloseFence":"YGBg","Properties":{"id":"20240201213663-p0kdqnr","updated":"20240201213663"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c3Fs","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"mysql\u003e explain SELECT * FROM dept_emp WHERE emp_no IN (SELECT emp_no FROM dept_emp GROUP BY emp_no HAVING COUNT(emp_no)\u003e1);\n+----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+\n| id | select_type | table    | partitions | type  | possible_keys   | key     | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+\n|  1 | PRIMARY     | dept_emp | NULL       | ALL   | NULL            | NULL    | NULL    | NULL | 331143 |   100.00 | Using where |\n|  2 | SUBQUERY    | dept_emp | NULL       | index | PRIMARY,dept_no | PRIMARY | 16      | NULL | 331143 |   100.00 | Using index |\n+----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20240201213664-673wrq8","Type":"NodeParagraph","Properties":{"id":"20240201213664-673wrq8","updated":"20240201213664"},"Children":[{"Type":"NodeText","Data":"可以看到，执行计划结果中共有 12 列，各列代表的含义总结如下表："}]},{"ID":"20240201213665-sie3yw0","Type":"NodeTable","Data":"| **列名**      | **含义**                                     |\n| ------------- | -------------------------------------------- |\n| id            | SELECT 查询的序列标识符                      |\n| select_type   | SELECT 关键字对应的查询类型                  |\n| table         | 用到的表名                                   |\n| partitions    | 匹配的分区，对于未分区的表，值为 NULL        |\n| type          | 表的访问方法                                 |\n| possible_keys | 可能用到的索引                               |\n| key           | 实际用到的索引                               |\n| key_len       | 所选索引的长度                               |\n| ref           | 当使用索引等值查询时，与索引作比较的列或常量 |\n| rows          | 预计要读取的行数                             |\n| filtered      | 按表条件过滤后，留存的记录数的百分比         |\n| Extra         | 附加信息                                     |","TableAligns":[0,0],"Properties":{"id":"20240201213665-sie3yw0","updated":"20240201213665"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"列名"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"含义"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"id"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"SELECT 查询的序列标识符"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"select_type"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"SELECT 关键字对应的查询类型"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"table"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用到的表名"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"partitions"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"匹配的分区，对于未分区的表，值为 NULL"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"type"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"表的访问方法"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"possible_keys"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"可能用到的索引"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"key"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"实际用到的索引"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"key_len"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"所选索引的长度"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ref"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"当使用索引等值查询时，与索引作比较的列或常量"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"rows"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"预计要读取的行数"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"filtered"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"按表条件过滤后，留存的记录数的百分比"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Extra"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"附加信息"}]}]}]},{"ID":"20240201213666-w61t3sd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213666-w61t3sd","updated":"20240201213666"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"如何分析 EXPLAIN 结果？"}]},{"ID":"20240201213667-3fgjssc","Type":"NodeParagraph","Properties":{"id":"20240201213667-3fgjssc","updated":"20240201213667"},"Children":[{"Type":"NodeText","Data":"为了分析 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"EXPLAIN"},{"Type":"NodeText","Data":" 语句的执行结果，我们需要搞懂执行计划中的重要字段。"}]},{"ID":"20240201213668-w4j45yu","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213668-w4j45yu","updated":"20240201213668"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"id"}]},{"ID":"20240201213669-4fgotfh","Type":"NodeParagraph","Properties":{"id":"20240201213669-4fgotfh","updated":"20240201213669"},"Children":[{"Type":"NodeText","Data":"SELECT 标识符，是查询中 SELECT 的序号，用来标识整个查询中 SELELCT 语句的顺序。"}]},{"ID":"20240201213670-cub8bfb","Type":"NodeParagraph","Properties":{"id":"20240201213670-cub8bfb","updated":"20240201213670"},"Children":[{"Type":"NodeText","Data":"id 如果相同，从上往下依次执行。id 不同，id 值越大，执行优先级越高，如果行引用其他行的并集结果，则该值可以为 NULL。"}]},{"ID":"20240201213671-ytc3q7i","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213671-ytc3q7i","updated":"20240201213671"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"select_type"}]},{"ID":"20240201213672-wez9cws","Type":"NodeParagraph","Properties":{"id":"20240201213672-wez9cws","updated":"20240201213672"},"Children":[{"Type":"NodeText","Data":"查询的类型，主要用于区分普通查询、联合查询、子查询等复杂的查询，常见的值有："}]},{"ID":"20240201213673-q9gnqnl","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213673-q9gnqnl","updated":"20240201213673"},"Children":[{"ID":"20240201213674-uoyjw0c","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213674-uoyjw0c","updated":"20240201213674"},"Children":[{"ID":"20240201213675-f931qio","Type":"NodeParagraph","Properties":{"id":"20240201213675-f931qio","updated":"20240201213675"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"SIMPLE"},{"Type":"NodeText","Data":"：简单查询，不包含 UNION 或者子查询。"}]}]},{"ID":"20240201213676-zpd47ok","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213676-zpd47ok","updated":"20240201213676"},"Children":[{"ID":"20240201213677-uh09smd","Type":"NodeParagraph","Properties":{"id":"20240201213677-uh09smd","updated":"20240201213677"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"PRIMARY"},{"Type":"NodeText","Data":"：查询中如果包含子查询或其他部分，外层的 SELECT 将被标记为 PRIMARY。"}]}]},{"ID":"20240201213678-3u0f1go","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213678-3u0f1go","updated":"20240201213678"},"Children":[{"ID":"20240201213679-5uvsjal","Type":"NodeParagraph","Properties":{"id":"20240201213679-5uvsjal","updated":"20240201213679"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"SUBQUERY"},{"Type":"NodeText","Data":"：子查询中的第一个 SELECT。"}]}]},{"ID":"20240201213680-ukd5yii","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213680-ukd5yii","updated":"20240201213680"},"Children":[{"ID":"20240201213681-1k3ss1k","Type":"NodeParagraph","Properties":{"id":"20240201213681-1k3ss1k","updated":"20240201213681"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"UNION"},{"Type":"NodeText","Data":"：在 UNION 语句中，UNION 之后出现的 SELECT。"}]}]},{"ID":"20240201213682-uuagzx9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213682-uuagzx9","updated":"20240201213682"},"Children":[{"ID":"20240201213683-h0pttj7","Type":"NodeParagraph","Properties":{"id":"20240201213683-h0pttj7","updated":"20240201213683"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"DERIVED"},{"Type":"NodeText","Data":"：在 FROM 中出现的子查询将被标记为 DERIVED。"}]}]},{"ID":"20240201213684-vtx35o1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213684-vtx35o1","updated":"20240201213684"},"Children":[{"ID":"20240201213685-vm2ipr9","Type":"NodeParagraph","Properties":{"id":"20240201213685-vm2ipr9","updated":"20240201213685"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"UNION RESULT"},{"Type":"NodeText","Data":"：UNION 查询的结果。"}]}]}]},{"ID":"20240201213686-3qfrpzh","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213686-3qfrpzh","updated":"20240201213686"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"table"}]},{"ID":"20240201213687-8tq1hyy","Type":"NodeParagraph","Properties":{"id":"20240201213687-8tq1hyy","updated":"20240201213687"},"Children":[{"Type":"NodeText","Data":"查询用到的表名，每行都有对应的表名，表名除了正常的表之外，也可能是以下列出的值："}]},{"ID":"20240201213688-r2rfk7k","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213688-r2rfk7k","updated":"20240201213688"},"Children":[{"ID":"20240201213689-krkys83","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213689-krkys83","updated":"20240201213689"},"Children":[{"ID":"20240201213690-sxdmied","Type":"NodeParagraph","Properties":{"id":"20240201213690-sxdmied","updated":"20240201213690"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"\u0026lt;unionM,N\u0026gt;"},{"Type":"NodeText","Data":" : 本行引用了 id 为 M 和 N 的行的 UNION 结果；"}]}]},{"ID":"20240201213691-zcvrtn0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213691-zcvrtn0","updated":"20240201213691"},"Children":[{"ID":"20240201213692-3x7799o","Type":"NodeParagraph","Properties":{"id":"20240201213692-3x7799o","updated":"20240201213692"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"\u0026lt;derivedN\u0026gt;"},{"Type":"NodeText","Data":" : 本行引用了 id 为 N 的表所产生的的派生表结果。派生表有可能产生自 FROM 语句中的子查询。"}]}]},{"ID":"20240201213693-73iushb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213693-73iushb","updated":"20240201213693"},"Children":[{"ID":"20240201213694-zhpigdl","Type":"NodeParagraph","Properties":{"id":"20240201213694-zhpigdl","updated":"20240201213694"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"\u0026lt;subqueryN\u0026gt;"},{"Type":"NodeText","Data":" : 本行引用了 id 为 N 的表所产生的的物化子查询结果。"}]}]}]},{"ID":"20240201213695-nv56unf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213695-nv56unf","updated":"20240201213695"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"type（重要）"}]},{"ID":"20240201213696-dd2fpi6","Type":"NodeParagraph","Properties":{"id":"20240201213696-dd2fpi6","updated":"20240201213696"},"Children":[{"Type":"NodeText","Data":"查询执行的类型，描述了查询是如何执行的。所有值的顺序从最优到最差排序为：system \u003e const \u003e eq_ref \u003e ref \u003e fulltext \u003e ref_or_null \u003e index_merge \u003e unique_subquery \u003e index_subquery \u003e range \u003e index \u003e ALL"}]},{"ID":"20240201213697-k7dizgu","Type":"NodeParagraph","Properties":{"id":"20240201213697-k7dizgu","updated":"20240201213697"},"Children":[{"Type":"NodeText","Data":"常见的几种类型具体含义如下："}]},{"ID":"20240201213698-8p8ic1s","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213698-8p8ic1s","updated":"20240201213698"},"Children":[{"ID":"20240201213699-8z7cfrf","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213699-8z7cfrf","updated":"20240201213699"},"Children":[{"ID":"20240201213700-cmax9rp","Type":"NodeParagraph","Properties":{"id":"20240201213700-cmax9rp","updated":"20240201213700"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"system"},{"Type":"NodeText","Data":"：如果表使用的引擎对于表行数统计是精确的（如：MyISAM），且表中只有一行记录的情况下，访问方法是 system ，是 const 的一种特例。"}]}]},{"ID":"20240201213701-3iii9ul","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213701-3iii9ul","updated":"20240201213701"},"Children":[{"ID":"20240201213702-enzuf1c","Type":"NodeParagraph","Properties":{"id":"20240201213702-enzuf1c","updated":"20240201213702"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"const"},{"Type":"NodeText","Data":"：表中最多只有一行匹配的记录，一次查询就可以找到，常用于使用主键或唯一索引的所有字段作为查询条件。"}]}]},{"ID":"20240201213703-8k6zqiz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213703-8k6zqiz","updated":"20240201213703"},"Children":[{"ID":"20240201213704-0jl3was","Type":"NodeParagraph","Properties":{"id":"20240201213704-0jl3was","updated":"20240201213704"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"eq_ref"},{"Type":"NodeText","Data":"：当连表查询时，前一张表的行在当前这张表中只有一行与之对应。是除了 system 与 const 之外最好的 join 方式，常用于使用主键或唯一索引的所有字段作为连表条件。"}]}]},{"ID":"20240201213705-0yyztkv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213705-0yyztkv","updated":"20240201213705"},"Children":[{"ID":"20240201213706-ept3z4g","Type":"NodeParagraph","Properties":{"id":"20240201213706-ept3z4g","updated":"20240201213706"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"ref"},{"Type":"NodeText","Data":"：使用普通索引作为查询条件，查询结果可能找到多个符合条件的行。"}]}]},{"ID":"20240201213707-owz9sg2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213707-owz9sg2","updated":"20240201213707"},"Children":[{"ID":"20240201213708-w5wae3v","Type":"NodeParagraph","Properties":{"id":"20240201213708-w5wae3v","updated":"20240201213708"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"index_merge"},{"Type":"NodeText","Data":"：当查询条件使用了多个索引时，表示开启了 Index Merge 优化，此时执行计划中的 key 列列出了使用到的索引。"}]}]},{"ID":"20240201213709-zdfs4re","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213709-zdfs4re","updated":"20240201213709"},"Children":[{"ID":"20240201213710-octh55p","Type":"NodeParagraph","Properties":{"id":"20240201213710-octh55p","updated":"20240201213710"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"range"},{"Type":"NodeText","Data":"：对索引列进行范围查询，执行计划中的 key 列表示哪个索引被使用了。"}]}]},{"ID":"20240201213711-izvk7gi","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213711-izvk7gi","updated":"20240201213711"},"Children":[{"ID":"20240201213712-1rla0fy","Type":"NodeParagraph","Properties":{"id":"20240201213712-1rla0fy","updated":"20240201213712"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"index"},{"Type":"NodeText","Data":"：查询遍历了整棵索引树，与 ALL 类似，只不过扫描的是索引，而索引一般在内存中，速度更快。"}]}]},{"ID":"20240201213713-jmm7byi","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213713-jmm7byi","updated":"20240201213713"},"Children":[{"ID":"20240201213714-2u9b41o","Type":"NodeParagraph","Properties":{"id":"20240201213714-2u9b41o","updated":"20240201213714"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"ALL"},{"Type":"NodeText","Data":"：全表扫描。"}]}]}]},{"ID":"20240201213715-0zc8jtm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213715-0zc8jtm","updated":"20240201213715"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"possible_keys"}]},{"ID":"20240201213716-n2klh8m","Type":"NodeParagraph","Properties":{"id":"20240201213716-n2klh8m","updated":"20240201213716"},"Children":[{"Type":"NodeText","Data":"possible_keys 列表示 MySQL 执行查询时可能用到的索引。如果这一列为 NULL ，则表示没有可能用到的索引；这种情况下，需要检查 WHERE 语句中所使用的的列，看是否可以通过给这些列中某个或多个添加索引的方法来提高查询性能。"}]},{"ID":"20240201213717-6fuif1p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213717-6fuif1p","updated":"20240201213717"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"key（重要）"}]},{"ID":"20240201213718-np8vsis","Type":"NodeParagraph","Properties":{"id":"20240201213718-np8vsis","updated":"20240201213718"},"Children":[{"Type":"NodeText","Data":"key 列表示 MySQL 实际使用到的索引。如果为 NULL，则表示未用到索引。"}]},{"ID":"20240201213719-aonnkk6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213719-aonnkk6","updated":"20240201213719"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"key_len"}]},{"ID":"20240201213720-9mdwcdk","Type":"NodeParagraph","Properties":{"id":"20240201213720-9mdwcdk","updated":"20240201213720"},"Children":[{"Type":"NodeText","Data":"key_len 列表示 MySQL 实际使用的索引的最大长度；当使用到联合索引时，有可能是多个列的长度和。在满足需求的前提下越短越好。如果 key 列显示 NULL ，则 key_len 列也显示 NULL 。"}]},{"ID":"20240201213721-6w3i2vg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213721-6w3i2vg","updated":"20240201213721"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"rows"}]},{"ID":"20240201213722-9xy9o74","Type":"NodeParagraph","Properties":{"id":"20240201213722-9xy9o74","updated":"20240201213722"},"Children":[{"Type":"NodeText","Data":"rows 列表示根据表统计信息及选用情况，大致估算出找到所需的记录或所需读取的行数，数值越小越好。"}]},{"ID":"20240201213723-bv224s9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240201213723-bv224s9","updated":"20240201213723"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"Extra（重要）"}]},{"ID":"20240201213724-je8rx7t","Type":"NodeParagraph","Properties":{"id":"20240201213724-je8rx7t","updated":"20240201213724"},"Children":[{"Type":"NodeText","Data":"这列包含了 MySQL 解析查询的额外信息，通过这些信息，可以更准确的理解 MySQL 到底是如何执行查询的。常见的值如下："}]},{"ID":"20240201213725-8si6m17","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213725-8si6m17","updated":"20240201213725"},"Children":[{"ID":"20240201213726-v5w7x7v","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213726-v5w7x7v","updated":"20240201213726"},"Children":[{"ID":"20240201213727-rryehs6","Type":"NodeParagraph","Properties":{"id":"20240201213727-rryehs6","updated":"20240201213727"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using filesort"},{"Type":"NodeText","Data":"：在排序时使用了外部的索引排序，没有用到表内索引进行排序。"}]}]},{"ID":"20240201213728-0r2yxzl","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213728-0r2yxzl","updated":"20240201213728"},"Children":[{"ID":"20240201213729-ziu6yza","Type":"NodeParagraph","Properties":{"id":"20240201213729-ziu6yza","updated":"20240201213729"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using temporary"},{"Type":"NodeText","Data":"：MySQL 需要创建临时表来存储查询的结果，常见于 ORDER BY 和 GROUP BY。"}]}]},{"ID":"20240201213730-fe95u0f","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213730-fe95u0f","updated":"20240201213730"},"Children":[{"ID":"20240201213731-gubrsaw","Type":"NodeParagraph","Properties":{"id":"20240201213731-gubrsaw","updated":"20240201213731"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using index"},{"Type":"NodeText","Data":"：表明查询使用了覆盖索引，不用回表，查询效率非常高。"}]}]},{"ID":"20240201213732-rrvo8qe","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213732-rrvo8qe","updated":"20240201213732"},"Children":[{"ID":"20240201213733-op4988a","Type":"NodeParagraph","Properties":{"id":"20240201213733-op4988a","updated":"20240201213733"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using index condition"},{"Type":"NodeText","Data":"：表示查询优化器选择使用了索引条件下推这个特性。"}]}]},{"ID":"20240201213734-wmukgdq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213734-wmukgdq","updated":"20240201213734"},"Children":[{"ID":"20240201213735-wft66xa","Type":"NodeParagraph","Properties":{"id":"20240201213735-wft66xa","updated":"20240201213735"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using where"},{"Type":"NodeText","Data":"：表明查询使用了 WHERE 子句进行条件过滤。一般在没有使用到索引的时候会出现。"}]}]},{"ID":"20240201213736-p6hf289","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213736-p6hf289","updated":"20240201213736"},"Children":[{"ID":"20240201213737-z3f1nz7","Type":"NodeParagraph","Properties":{"id":"20240201213737-z3f1nz7","updated":"20240201213737"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Using join buffer (Block Nested Loop)"},{"Type":"NodeText","Data":"：连表查询的方式，表示当被驱动表的没有使用索引的时候，MySQL 会先将驱动表读出来放到 join buffer 中，再遍历被驱动表与驱动表进行查询。"}]}]}]},{"ID":"20240201213738-hpssol5","Type":"NodeParagraph","Properties":{"id":"20240201213738-hpssol5","updated":"20240201213738"},"Children":[{"Type":"NodeText","Data":"这里提醒下，当 Extra 列包含 Using filesort 或 Using temporary 时，MySQL 的性能可能会存在问题，需要尽可能避免。"}]},{"ID":"20240201213739-b648sf4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240201213739-b648sf4","updated":"20240201213739"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"参考"}]},{"ID":"20240201213740-xbhtcwt","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213740-xbhtcwt","updated":"20240201213740"},"Children":[{"ID":"20240201213741-0ksejlp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213741-0ksejlp","updated":"20240201213741"},"Children":[{"ID":"20240201213742-sonyoh5","Type":"NodeParagraph","Properties":{"id":"20240201213742-sonyoh5","updated":"20240201213742"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://dev.mysql.com/doc/refman/5.7/en/explain-output.html","TextMarkTextContent":"https://dev.mysql.com/doc/refman/5.7/en/explain-output.html"}]}]},{"ID":"20240201213743-et9c1hb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20240201213743-et9c1hb","updated":"20240201213743"},"Children":[{"ID":"20240201213744-3n7xdkw","Type":"NodeParagraph","Properties":{"id":"20240201213744-3n7xdkw","updated":"20240201213744"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"https://juejin.cn/post/6953444668973514789","TextMarkTextContent":"https://juejin.cn/post/6953444668973514789"}]}]}]},{"ID":"20240201213745-bi6m10k","Type":"NodeHTMLBlock","Data":"\u003cdiv\u003e\n\u003c!-- @include: @article-footer.snippet.md --\u003e\n\u003c/div\u003e","HtmlBlockType":2,"Properties":{"id":"20240201213745-bi6m10k","updated":"20240201213745"}}]}