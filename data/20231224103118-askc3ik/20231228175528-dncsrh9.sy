{"ID":"20231228175528-dncsrh9","Spec":"1","Type":"NodeDocument","Properties":{"id":"20231228175528-dncsrh9","title":"Abstract Factory Pattern","updated":"20240103084248"},"Children":[{"ID":"20231228175528-67hd6zu","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20231228175528-67hd6zu","updated":"20231228181805"},"Children":[{"Type":"NodeText","Data":"案例：披萨店"}]},{"ID":"20231228181805-lyrifrv","Type":"NodeParagraph","Properties":{"id":"20231228181805-lyrifrv","updated":"20231228181805"},"Children":[{"Type":"NodeText","Data":"现在背景有变，有些加盟店，使用低价原料来增加利润，你必须采取一些手段，以免毁掉你的披萨店品牌。\n你打算建造一家成产原料的工厂，并将原料运送到各家加盟店，那么剩下最后一个问题，不同的区域原料是不一样的，对于两个加盟店给出了两组不同的原料。"}]},{"ID":"20231228213153-4fj3zsf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231228213153-4fj3zsf","updated":"20231228213204"},"Children":[{"Type":"NodeText","Data":"优化方案：抽象工厂模式"}]},{"ID":"20231228213205-ie7gq89","Type":"NodeParagraph","Properties":{"id":"20231228213205-ie7gq89","updated":"20231228213205"},"Children":[{"Type":"NodeText","Data":"建造原料工厂\n我们要建造一个工厂来生产原料，这个工厂负责创建原料家族中的每一种原料。"}]},{"ID":"20231228213227-ihr7q2w","Type":"NodeParagraph","Properties":{"id":"20231228213227-ihr7q2w","updated":"20231228213227"}},{"ID":"20231228183113-8455pfo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231228183113-8455pfo","updated":"20231228213246"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public interface PizzaIngredientFactory {\n    public Dough createDough();\n    public Sauce createSauce();\n    public Cheese createCheese();\n    public Veggies[] createVeggies();\n    public Pepperoni createPepperoni();\n    public Clams createClams();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231228213447-v5fkhrq","Type":"NodeParagraph","Properties":{"id":"20231228213447-v5fkhrq","updated":"20231228213458"},"Children":[{"Type":"NodeText","Data":"创建原料工厂子类"}]},{"ID":"20231228213458-p6y1rxo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231228213458-p6y1rxo","updated":"20231228213545"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class NYPizzaIngredientFactory implements PizzaIngredientFactory{\n    @Override\n    public Dough createDough() {\n        return null;\n    }\n\t...  \n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231228214012-szlznh9","Type":"NodeParagraph","Properties":{"id":"20231228214012-szlznh9","updated":"20231228214020"},"Children":[{"Type":"NodeText","Data":"重做 Pizza"}]},{"ID":"20231228214021-ot0qq0j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231228214021-ot0qq0j","updated":"20231228214103"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"abstract class Pizza{\n    String name;\n    Dough dough;\n    Sauce sauce;\n    Veggies veggies[];\n    Cheese cheese;\n    Pepperoni pepperoni;\n    Clams clams;\n    abstract void prepare();\n    void cut(){\n        System.out.println(\"Cutting the pizza into diagonal slices\");\n    }\n    void box(){\n        System.out.println(\"Place pizza in official PizzaStore box\");\n    }\n    void setName(String name){\n        this.name=name;\n    }\n    public String getName(){\n        return name;\n    }\n    public void toString2(){\n        //这里打印披萨的代码\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231228214135-04gzvng","Type":"NodeParagraph","Properties":{"id":"20231228214135-04gzvng","updated":"20231228214559"},"Children":[{"Type":"NodeText","Data":"重做 Pizza子类"}]},{"ID":"20231228214559-5gu9t1q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231228214559-5gu9t1q","updated":"20231228214655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class CheesePizza extends Pizza {\n    //这里组合了一个PizzaIngredientFactory对象的引用，用于提供不同的原料\n    PizzaIngredientFactory ingredientFactory;\n    /**\n     * 通过传入一个PizzaIngredientFactory原料工厂，我们可以在制作Pizza的时候动态的产生所需要的原料\n     * @param ingredientFactory\n     */\n    public CheesePizza(PizzaIngredientFactory ingredientFactory) {\n        this.ingredientFactory = ingredientFactory;\n    }\n    void prepare() {\n        System.out.println(\"Preparing \" + name);\n        dough = ingredientFactory.createDough();\n        sauce = ingredientFactory.createSauce();\n        cheese = ingredientFactory.createCheese();\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231228214657-muu3grg","Type":"NodeParagraph","Properties":{"id":"20231228214657-muu3grg","updated":"20231228222944"},"Children":[{"Type":"NodeText","Data":"回到 Pizza店"}]},{"ID":"20231228222954-d6gmdyb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20231228222954-d6gmdyb","updated":"20231228225846"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class NYPizzaStore extends PizzaStore {\n    protected Pizza createPizza(String item){\n        Pizza pizza = null;\n        PizzaIngredientFactory ingredientFactory = new NYPizzaIngredientFactory();\n        if (item.equals(\"cheese\")){\n            pizza = new CheesePizza(ingredientFactory);\n            pizza.setName(\"New York Style Cheese Pizza\");\n        } else if (item.equals(\"veggie\")) {\n            pizza = new VeggiePizza(ingredientFactory);\n            pizza.setName(\"New York Style Veggie Pizza\");\n        } else if (item.equals(\"clam\")) {\n            pizza = new ClamPizza(ingredientFactory);\n            pizza.setName(\"New York Style Clam Pizza\");\n        } else if (item.equals(\"pepperoni\")) {\n            pizza = new PepperoniPizza(ingredientFactory);\n            pizza.setName(\"New York Style Pepperoni Pizza\");\n        }\n        return pizza;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20231228225450-cjbd1uj","Type":"NodeParagraph","Properties":{"id":"20231228225450-cjbd1uj","updated":"20231228225913"},"Children":[{"Type":"NodeText","Data":"我们做了些什么？\n我们引入新类型的工厂，也就是所谓的抽象工厂，来创建披萨原料家族。\n通过抽象工厂所提供的接口可以创建产品的家族，利用这个接口书写代码，我们的代码将从实际工厂解耦，以便在不同上下文中实现各式各样的工厂，制造出各种不同的产品。"}]},{"ID":"20231229000232-apmv1ln","Type":"NodeParagraph","Properties":{"id":"20231229000232-apmv1ln","updated":"20231229000232"},"Children":[{"Type":"NodeText","Data":"具体来说，抽象工厂模式适用于以下情景："}]},{"ID":"20231229000232-efuvsub","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231229000232-efuvsub","updated":"20231229000232"},"Children":[{"ID":"20231229000232-ll9dg89","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231229000232-ll9dg89","updated":"20231229000232"},"Children":[{"ID":"20231229000232-7sn1ee1","Type":"NodeParagraph","Properties":{"id":"20231229000232-7sn1ee1","updated":"20231229000232"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"产品家族："},{"Type":"NodeText","Data":" 有多个相关的产品组成一个产品家族，这些产品之间存在依赖关系，它们一起工作以满足一些共同的需求。"}]}]},{"ID":"20231229000232-krkjrrh","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231229000232-krkjrrh","updated":"20231229000232"},"Children":[{"ID":"20231229000232-3nhgt75","Type":"NodeParagraph","Properties":{"id":"20231229000232-3nhgt75","updated":"20231229000232"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"产品变体："},{"Type":"NodeText","Data":" 有多个不同变体或配置的产品，客户端可能需要一次性使用一整套相关的产品。"}]}]}]},{"ID":"20240101183720-5f0vwws","Type":"NodeParagraph","Properties":{"id":"20240101183720-5f0vwws","updated":"20240101183727"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240101183720-5huw2fd.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20231228225922-xxu4mjf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20231228225922-xxu4mjf","updated":"20231228225926"},"Children":[{"Type":"NodeText","Data":"定义"}]},{"ID":"20231228225927-tjwz0kr","Type":"NodeParagraph","Properties":{"id":"20231228225927-tjwz0kr","updated":"20231230105515"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"抽象工厂是一种创建型设计模式，提供了一个接口用于创建一系列相关或依赖的对象，而无需指定它们的具体类。该模式是工厂方法模式的延伸，它不仅提供了创建单一对象的能力，还提供了创建一组相关对象的能力。"}]},{"ID":"20231230105451-xh42893","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20231230105451-xh42893","updated":"20240103084248"},"Children":[{"ID":"20231230105451-1r3uyja","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20231230105451-1r3uyja","updated":"20240103084248"},"Children":[{"ID":"20231230105451-q250ecf","Type":"NodeParagraph","Properties":{"id":"20231230105451-q250ecf","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"关注点不同"},{"Type":"NodeText","Data":"："}]},{"ID":"20231230105451-bybf5tc","Type":"NodeList","ListData":{},"Properties":{"id":"20231230105451-bybf5tc","updated":"20240103084248"},"Children":[{"ID":"20231230105451-y7tfx42","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-y7tfx42","updated":"20231230105451"},"Children":[{"ID":"20231230105451-22okksy","Type":"NodeParagraph","Properties":{"id":"20231230105451-22okksy","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"工厂方法模式"},{"Type":"NodeText","Data":"关注于一个产品等级结构，它定义了一个用于创建单一产品的接口，而由子类决定实例化哪个具体类。每个具体工厂对应于一个具体产品。"}]}]},{"ID":"20231230105451-1rs38ua","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-1rs38ua","updated":"20240103084248"},"Children":[{"ID":"20231230105451-h45it69","Type":"NodeParagraph","Properties":{"id":"20231230105451-h45it69","updated":"20240103084248"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"抽象工厂模式"},{"Type":"NodeText","Data":"关注于一组产品等级结构，它提供一个接口用于创建一系列相关或依赖的产品，而不关心具体产品是什么。（dough、sauce）等。"}]}]}]}]},{"ID":"20231230105451-5yheo0s","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20231230105451-5yheo0s","updated":"20231230105451"},"Children":[{"ID":"20231230105451-9lx9yx7","Type":"NodeParagraph","Properties":{"id":"20231230105451-9lx9yx7","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"产品数量"},{"Type":"NodeText","Data":"："}]},{"ID":"20231230105451-ium48u2","Type":"NodeList","ListData":{},"Properties":{"id":"20231230105451-ium48u2","updated":"20231230105451"},"Children":[{"ID":"20231230105451-a1g924r","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-a1g924r","updated":"20231230105451"},"Children":[{"ID":"20231230105451-k39fi7c","Type":"NodeParagraph","Properties":{"id":"20231230105451-k39fi7c","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"工厂方法模式"},{"Type":"NodeText","Data":"通常只涉及一个产品的创建，即一个工厂对应一个产品。"}]}]},{"ID":"20231230105451-s5jiagm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-s5jiagm","updated":"20231230105451"},"Children":[{"ID":"20231230105451-kj3pffs","Type":"NodeParagraph","Properties":{"id":"20231230105451-kj3pffs","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"抽象工厂模式"},{"Type":"NodeText","Data":"涉及多个产品的创建，一个工厂接口可以创建多个相关的产品。"}]}]}]}]},{"ID":"20231230105451-gfvc435","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20231230105451-gfvc435","updated":"20231230105451"},"Children":[{"ID":"20231230105451-mzjrm8j","Type":"NodeParagraph","Properties":{"id":"20231230105451-mzjrm8j","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用场景"},{"Type":"NodeText","Data":"："}]},{"ID":"20231230105451-rkceb4i","Type":"NodeList","ListData":{},"Properties":{"id":"20231230105451-rkceb4i","updated":"20231230105451"},"Children":[{"ID":"20231230105451-e1r14jk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-e1r14jk","updated":"20231230105451"},"Children":[{"ID":"20231230105451-7mctj43","Type":"NodeParagraph","Properties":{"id":"20231230105451-7mctj43","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"工厂方法模式"},{"Type":"NodeText","Data":"适用于一个产品等级结构的情况，其中每个具体工厂负责实例化一个具体产品。"}]}]},{"ID":"20231230105451-f2xmwf3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20231230105451-f2xmwf3","updated":"20231230105451"},"Children":[{"ID":"20231230105451-uqt49sg","Type":"NodeParagraph","Properties":{"id":"20231230105451-uqt49sg","updated":"20231230105451"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"抽象工厂模式"},{"Type":"NodeText","Data":"适用于多个产品等级结构的情况，其中每个工厂负责实例化一组相关的产品。"}]}]}]}]}]},{"ID":"20231230105516-oolbce6","Type":"NodeParagraph","Properties":{"id":"20231230105516-oolbce6"}}]}